import{openBlock as d,createElementBlock as l,createElementVNode as u,defineComponent as m}from"vue";import{_ as c,G as n,R as t,b as a,a as f,ao as _}from"./index.18ba2282.js";import{N as r,a as o}from"./NaiveUtils.2ea9fd11.js";import"workbox-window";class g{constructor(i){this.uuid="",this.email="",this.userid=0,i&&(this.uuid=i.uuid!==void 0&&i.uuid!==null?i.uuid:"",this.email=i.email!==void 0&&i.email!==null?i.email:"",this.userid=i.userid!==void 0&&i.userid!==null?i.userid:0)}toJsonKey(i){switch(i){case"uuid":return"uuid";case"email":return"email";case"userid":return"userid";default:return i}}}const p={class:"confirm_email_uuid"},h=u("h1",null,"Email Confirmation",-1),E=u("p",null,"Confirming your email address...",-1),R=[h,E];function w(e,i,s,C,v,y){return d(),l("div",p,R)}const T=m({beforeMount(){r.init()},async mounted(){const e=await n.genCurrentUser();if(e.details.confirmed){await t.genRedirectTo(a.Landing);return}const i=n.paramID();if(i===void 0){await t.genRedirectTo(a.unconfirmed_Email);return}const s=await f.genPOST("confirm/email",_.stringify(new g({uuid:i,email:e.details.email,userid:e.ID})));await n.genUpdateCurrentUser(),s?(r.notifyTrigger("Email Confirmation","Your email is now confirmed!",o.SUCCESS),await t.genRedirectTo(a.Landing)):(r.notifyTrigger("Email Confirmation","Email confirmation failed.",o.ERROR),await t.genRedirectTo(a.unconfirmed_Email))}});var x=c(T,[["render",w]]);export{x as default};
