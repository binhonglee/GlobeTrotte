import{a as g}from"./CPlaces.76a05915.js";import{C as w}from"./CTripPreviewCard.0c59613a.js";import{U as C,G as k,R as T,a as $,_ as E}from"./index.7963d8ee.js";import{T as B}from"./TripUtil.cf3da4e6.js";import{r as a,o as t,d as s,i as u,B as c,g as r,f as _,w as o,h as i,e as n,F as N,v as P,q as U,s as b,j,K as A,x as I,D as V}from"./vendor.7e867dc2.js";const D=e=>(U("data-v-2fdaa0ba"),e=e(),b(),e),L={class:"view_user"},R={class:"userInfo narrow_content"},S={key:0,class:"userName left_col"},G={key:1,class:"userBio"},O={key:3,class:"userInfoButtonGroups"},q=i("Logout"),F=i("Edit"),M={class:"viewUserTrips"},z=D(()=>u("h2",null,"Trips",-1)),K={key:0,class:"createTripAlertDiv"},H=i("Seems like you have not shared any of your own trips."),J=i("Create New Trip");function Q(e,l,d,X,Y,Z){const f=a("CExternalLink"),p=a("n-button"),h=a("n-divider"),m=a("CTripPreviewCard"),y=a("n-alert");return t(),s("div",L,[u("div",R,[e.showName?(t(),s("h2",S,c(e.user.details.name),1)):r("",!0),e.user.details.bio!==""?(t(),s("p",G,c(e.user.details.bio),1)):r("",!0),e.user.details.link!==""?(t(),_(f,{key:2,underline:"hover",url:e.user.details.link.valueOf()},{default:o(()=>[i(c(e.user.details.link),1)]),_:1},8,["url"])):r("",!0),e.self?(t(),s("div",O,[n(p,{class:"myAccountLogout left_col",type:"error",onClick:e.logout},{default:o(()=>[q]),_:1},8,["onClick"]),n(p,{class:"myAccountEdit right_col",type:"default",ref:"edit",onClick:e.toggleEdit},{default:o(()=>[F]),_:1},8,["onClick"])])):r("",!0)]),n(h,{class:"viewUserDivider"}),u("div",M,[z,(t(!0),s(N,null,P(e.trips,v=>(t(),_(m,{trip:v,wide:!0},null,8,["trip"]))),256)),e.self&&e.tripsEmpty?(t(),s("div",K,[n(y,{class:"createTripAlert",type:"default","show-icon":!1},{default:o(()=>[H,e.confirmed?(t(),_(p,{key:0,class:"createTripButton",type:"info",onClick:e.newTrip,size:"large"},{default:o(()=>[J]),_:1},8,["onClick"])):r("",!0)]),_:1})])):r("",!0)])])}const W=j({name:"CViewUser",components:{CExternalLink:g,CTripPreviewCard:w,NAlert:A,NButton:I,NDivider:V},props:{user:{type:C,required:!0},showName:{type:Boolean,default:!0},self:{type:Boolean,default:!1},confirmed:{type:Boolean,default:!1}},emits:{logout(){return!0},toggleEdit(){return!0}},data:()=>({trips:[],lastPopulated:[],tripsEmpty:!0}),async beforeMount(){await this.genPopulateTrips()},async beforeUpdate(){await this.genPopulateTrips()},methods:{compareArray(e,l){if(e.length!==l.length)return!1;for(let d in e)if(e[d]!==l[d])return!1;return!0},async genPopulateTrips(){this.compareArray(this.$data.lastPopulated,this.$props.user.trips)||(this.$data.trips=await Promise.all(this.$props.user.trips.map(async e=>await k.genTrip(e.ID.valueOf()))),B.sortTripsMostRecentlyUpdated(this.$data.trips),this.$data.tripsEmpty=this.$data.trips.length<=0,this.$data.lastPopulated=this.$props.user.trips)},logout(){this.$emit("logout")},toggleEdit(){this.$emit("toggleEdit")},async newTrip(){await T.genRedirectTo($.trip_New)}}});var ae=E(W,[["render",Q],["__scopeId","data-v-2fdaa0ba"]]);export{ae as C};
