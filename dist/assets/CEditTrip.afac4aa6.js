import{P as pe,a as et,D as fe}from"./DataProps.7f679f5d.js";import{d as R,x as C,A as tt,z as nt,S as at,U as $e,X as it,V as F,E as st,W as lt,Y as O,ac as rt,a2 as ot,v as dt,a$ as he,J as me,a7 as ve,b0 as ut,aa as S,b1 as ct,o as $,c as I,e as c,r as f,F as Te,g as De,a as l,w as y,h as te,l as xe,n as Ne,i as P,N as ne,q as pt,b2 as ke,_ as ae,t as ft,m as ht,aS as mt,T as ie,aV as Ie,j as ee,b3 as vt,b4 as gt,b5 as ge,R as yt,k as _t}from"./index.8c30d1ef.js";import{u as bt,N as Pe}from"./Input.f624b265.js";import{C as wt,D as Y,E as M,N as Ct,a as ye}from"./CEditItem.5e4eae66.js";import{N as j,a as _e}from"./NaiveUtils.e33797b5.js";import{C as $t,F as Tt,a as Dt,b as xt,P as Nt}from"./CacheStorage.3773b082.js";import{N as kt}from"./Select.d366a6b7.js";var It=R({name:"Add",render(){return C("svg",{width:"512",height:"512",viewBox:"0 0 512 512",fill:"none",xmlns:"http://www.w3.org/2000/svg"},C("path",{d:"M256 112V400M400 256H112",stroke:"currentColor","stroke-width":"32","stroke-linecap":"round","stroke-linejoin":"round"}))}}),Pt=R({name:"Remove",render(){return C("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},C("line",{x1:"400",y1:"256",x2:"112",y2:"256",style:`
        fill: none;
        stroke: currentColor;
        stroke-linecap: round;
        stroke-linejoin: round;
        stroke-width: 32px;
      `}))}});function Rt(e){return e==null||typeof e=="string"&&e.trim()===""?null:Number(e)}function Ot(e){return e.includes(".")&&(/^(-)?\d+.*(\.|0)$/.test(e)||/^\.\d+$/.test(e))}function Q(e){return e==null?!0:!Number.isNaN(e)}function St(e){return e==null?"":String(e)}function Z(e){if(e===null)return null;if(typeof e=="number")return e;{const n=Number(e);return Number.isNaN(n)?null:n}}var Mt=tt([nt("input-number-suffix",`
 display: inline-block;
 margin-right: 10px;
 `)]);const be=800,we=100,Vt=Object.assign(Object.assign({},$e.props),{autofocus:Boolean,loading:{type:Boolean,default:void 0},placeholder:String,defaultValue:{type:Number,default:null},value:Number,step:{type:[Number,String],default:1},min:[Number,String],max:[Number,String],size:String,disabled:{type:Boolean,default:void 0},validator:Function,bordered:{type:Boolean,default:void 0},showButton:{type:Boolean,default:!0},readonly:Boolean,clearable:Boolean,keyboard:{type:Object,default:{}},updateValueOnInput:{type:Boolean,default:!0},status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onChange:[Function,Array]});var Et=R({name:"InputNumber",props:Vt,setup(e){const{mergedBorderedRef:n,mergedClsPrefixRef:a,mergedRtlRef:g}=at(e),r=$e("InputNumber","-input-number",Mt,ut,e,a),{localeRef:p}=bt("InputNumber"),h=it(e),{mergedSizeRef:T,mergedDisabledRef:d,mergedStatusRef:_}=h,m=F(null),x=F(null),N=F(null),v=F(e.defaultValue),b=st(e,"value"),u=lt(b,v),V=F(""),Ee=t=>{const i=[e.min,e.max,e.step,t].map(s=>{const o=String(s).split(".")[1];return o?o.length:0});return Math.max(...i)},Ae=O(()=>{const{placeholder:t}=e;return t!==void 0?t:p.value.placeholder}),H=O(()=>{const t=Z(e.step);return t!==null?t===0?1:Math.abs(t):1}),se=O(()=>{const t=Z(e.min);return t!==null?t:null}),le=O(()=>{const t=Z(e.max);return t!==null?t:null}),E=t=>{const{value:i}=u;if(t===i){A();return}const{"onUpdate:value":s,onUpdateValue:o,onChange:D}=e,{nTriggerFormInput:U,nTriggerFormChange:w}=h;D&&S(D,t),o&&S(o,t),s&&S(s,t),v.value=t,U(),w()},k=(t=0,i=!0,s=!1)=>{const{value:o}=V;if(s&&Ot(o))return!1;const D=Rt(o);if(D===null)return i&&E(null),null;if(Q(D)){const U=Ee(D);let w=parseFloat((D+t).toFixed(U));if(Q(w)){const{value:J}=le,{value:X}=se;if(J!==null&&w>J){if(!i||s)return!1;w=J}if(X!==null&&w<X){if(!i||s)return!1;w=X}return e.validator&&!e.validator(w)?!1:(i&&E(w),w)}}return!1},A=()=>{const{value:t}=u;Q(t)?V.value=St(t):V.value=String(t)};A();const Be=O(()=>k(0,!1)===!1),re=O(()=>{const{value:t}=u;if(e.validator&&t===null)return!1;const{value:i}=H;return k(-i,!1)!==!1}),oe=O(()=>{const{value:t}=u;if(e.validator&&t===null)return!1;const{value:i}=H;return k(+i,!1)!==!1});function Le(t){const{onFocus:i}=e,{nTriggerFormFocus:s}=h;i&&S(i,t),s()}function Ue(t){var i,s;if(t.target===((i=m.value)===null||i===void 0?void 0:i.wrapperElRef))return;const o=k();if(o!==!1){const w=(s=m.value)===null||s===void 0?void 0:s.inputElRef;w&&(w.value=String(o||"")),u.value===o&&A()}else A();const{onBlur:D}=e,{nTriggerFormBlur:U}=h;D&&S(D,t),U()}function Fe(t){const{onClear:i}=e;i&&S(i,t)}function q(){const{value:t}=oe;if(!t){ce();return}const{value:i}=u;if(i===null)e.validator||E(de());else{const{value:s}=H;k(s)}}function K(){const{value:t}=re;if(!t){ue();return}const{value:i}=u;if(i===null)e.validator||E(de());else{const{value:s}=H;k(-s)}}const je=Le,He=Ue;function de(){if(e.validator)return null;const{value:t}=se,{value:i}=le;return t!==null?Math.max(0,t):i!==null?Math.min(0,i):0}function ze(t){Fe(t),E(null)}function Ge(t){var i,s,o;!((i=N.value)===null||i===void 0)&&i.$el.contains(t.target)&&t.preventDefault(),!((s=x.value)===null||s===void 0)&&s.$el.contains(t.target)&&t.preventDefault(),(o=m.value)===null||o===void 0||o.activate()}let B=null,L=null,z=null;function ue(){z&&(window.clearTimeout(z),z=null),B&&(window.clearInterval(B),B=null)}function ce(){G&&(window.clearTimeout(G),G=null),L&&(window.clearInterval(L),L=null)}function We(){z=window.setTimeout(()=>{B=window.setInterval(()=>{K()},we)},be),ve("mouseup",document,()=>{window.setTimeout(ue,0)})}let G=null;function qe(){G=window.setTimeout(()=>{L=window.setInterval(()=>{q()},we)},be),ve("mouseup",document,()=>{window.setTimeout(ce,0)})}const Ke=()=>{L||q()},Je=()=>{B||K()};function Xe(t){var i,s;if(t.code==="Enter"||t.code==="NumpadEnter"){if(t.target===((i=m.value)===null||i===void 0?void 0:i.wrapperElRef))return;k()!==!1&&((s=m.value)===null||s===void 0||s.deactivate())}else if(t.code==="ArrowUp"){if(e.keyboard.ArrowUp===!1)return;t.preventDefault(),k()!==!1&&q()}else if(t.code==="ArrowDown"){if(e.keyboard.ArrowDown===!1)return;t.preventDefault(),k()!==!1&&K()}}function Ye(t){V.value=t,e.updateValueOnInput&&k(0,!0,!0)}rt(u,()=>{A()});const Qe={focus:()=>{var t;return(t=m.value)===null||t===void 0?void 0:t.focus()},blur:()=>{var t;return(t=m.value)===null||t===void 0?void 0:t.blur()}},Ze=ot("InputNumber",g,a);return Object.assign(Object.assign({},Qe),{rtlEnabled:Ze,inputInstRef:m,minusButtonInstRef:x,addButtonInstRef:N,mergedClsPrefix:a,mergedBordered:n,uncontrolledValue:v,mergedValue:u,mergedPlaceholder:Ae,displayedValueInvalid:Be,mergedSize:T,mergedDisabled:d,displayedValue:V,addable:oe,minusable:re,mergedStatus:_,handleFocus:je,handleBlur:He,handleClear:ze,handleMouseDown:Ge,handleAddClick:Ke,handleMinusClick:Je,handleAddMousedown:qe,handleMinusMousedown:We,handleKeyDown:Xe,handleUpdateDisplayedValue:Ye,mergedTheme:r,inputThemeOverrides:{paddingSmall:"0 8px 0 10px",paddingMedium:"0 8px 0 12px",paddingLarge:"0 8px 0 14px"},buttonThemeOverrides:dt(()=>{const{self:{iconColorDisabled:t}}=r.value,[i,s,o,D]=ct(t);return{textColorTextDisabled:`rgb(${i}, ${s}, ${o})`,opacityDisabled:`${D}`}})})},render(){const{mergedClsPrefix:e}=this;return C("div",{class:[`${e}-input-number`,this.rtlEnabled&&`${e}-input-number--rtl`]},C(Pe,{ref:"inputInstRef",autofocus:this.autofocus,status:this.mergedStatus,bordered:this.mergedBordered,loading:this.loading,value:this.displayedValue,onUpdateValue:this.handleUpdateDisplayedValue,theme:this.mergedTheme.peers.Input,themeOverrides:this.mergedTheme.peerOverrides.Input,builtinThemeOverrides:this.inputThemeOverrides,size:this.mergedSize,placeholder:this.mergedPlaceholder,disabled:this.mergedDisabled,readonly:this.readonly,textDecoration:this.displayedValueInvalid?"line-through":void 0,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onClear:this.handleClear,clearable:this.clearable,internalLoadingBeforeSuffix:!0},{prefix:()=>{var n,a;return(a=(n=this.$slots).prefix)===null||a===void 0?void 0:a.call(n)},suffix:()=>{var n,a;return this.showButton?[this.$slots.suffix&&C("span",{class:`${e}-input-number-suffix`},{default:this.$slots.suffix}),C(he,{text:!0,disabled:!this.minusable||this.mergedDisabled||this.readonly,focusable:!1,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleMinusClick,onMousedown:this.handleMinusMousedown,ref:"minusButtonInstRef"},{default:()=>C(me,{clsPrefix:e,"aria-disabled":!0},{default:()=>C(Pt,null)})}),C(he,{text:!0,disabled:!this.addable||this.mergedDisabled||this.readonly,focusable:!1,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleAddClick,onMousedown:this.handleAddMousedown,ref:"addButtonInstRef"},{default:()=>C(me,{clsPrefix:e},{default:()=>C(It,null)})})]:(a=(n=this.$slots).suffix)===null||a===void 0?void 0:a.call(n)}}))}});const At={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Bt=c("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M256 112v288"},null,-1),Lt=c("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M400 256H112"},null,-1),Ut=[Bt,Lt];var Re=R({name:"Add",render:function(n,a){return $(),I("svg",At,Ut)}});const Ft={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},jt=c("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M368 368L144 144"},null,-1),Ht=c("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M368 144L144 368"},null,-1),zt=[jt,Ht];var Oe=R({name:"CloseOutline",render:function(n,a){return $(),I("svg",Ft,zt)}});const Gt={class:"edit_places"},Wt={class:"places"},qt={key:0,class:"editTravelTime"},Kt={key:0,class:"travelTimeInput"},Jt=c("div",{class:"travelTimeLabel"},"Travel time",-1),Xt=P("minutes"),Yt=P("Set travel time"),Qt=c("br",null,null,-1),Zt=P("Delete this place"),en=P("Add another place");function tn(e,n,a,g,r,p){const h=f("n-divider"),T=f("n-input-number"),d=f("n-button"),_=f("n-input"),m=f("close-outline"),x=f("n-icon"),N=f("add");return $(),I("div",Gt,[c("ul",Wt,[($(!0),I(Te,null,De(e.propPlaces,(v,b)=>($(),I("li",{class:"place",key:b},[b>0?($(),I("div",qt,[l(h,{class:"editPlaceDivider"}),v.travelTime!==void 0?($(),I("div",Kt,[Jt,l(T,{placeholder:"Travel time (in minutes)",type:"text",min:0,value:v.travelTime.timeInMinutes,"onUpdate:value":u=>v.travelTime.timeInMinutes=u},{suffix:y(()=>[Xt]),_:2},1032,["value","onUpdate:value"])])):($(),te(d,{key:1,class:"setTravelTime",type:"default",onClick:u=>e.setTravelTime(b)},{default:y(()=>[Yt]),_:2},1032,["onClick"])),l(h,{class:"editPlaceDivider"})])):xe("",!0),c("div",{class:Ne(["editPlace","place"+b])},[l(_,{class:"inputPlaceLabel",value:v.place.label,"onUpdate:value":u=>v.place.label=u,type:"text",placeholder:"Place Name"+(b!==0?"":" (eg. Golden Gate Bridge)")},null,8,["value","onUpdate:value","placeholder"]),l(_,{class:"inputPlaceLink",value:v.place.URL,"onUpdate:value":u=>v.place.URL=u,type:"text",placeholder:"Link"+(b!==0?"":" (eg. Google Map link)")},null,8,["value","onUpdate:value","placeholder"]),Qt,l(_,{class:"inputPlaceDesc",value:v.place.description,"onUpdate:value":u=>v.place.description=u,type:"textarea",placeholder:b!==0?"Description":"Elaborate more about why you include this place in the trip!",rows:3},null,8,["value","onUpdate:value","placeholder"]),l(d,{class:"removePlace wide_button",type:"error",secondary:"",onClick:u=>e.removePlace(b)},{default:y(()=>[l(x,null,{default:y(()=>[l(m)]),_:1}),Zt]),_:2},1032,["onClick"])],2)]))),128))]),l(h,{class:"editPlaceDivider"}),l(d,{class:"addPlace wide_button",onClick:e.pushPlace},{default:y(()=>[l(x,null,{default:y(()=>[l(N)]),_:1}),en]),_:1},8,["onClick"])])}const nn=R({name:"CEditPlaces",components:{Add:Re,CloseOutline:Oe,NButton:ne,NDivider:pt,NIcon:ke,NInput:Pe,NInputNumber:Et},model:{props:{propPlaces:Array()},emits:["update:propPlaces"]},props:{propPlaces:{type:Array,default:()=>[],validator:function(e){return Array.isArray(e)?(e.forEach(n=>{if(!(n instanceof pe))return!1}),!0):!1}}},methods:{pushPlace(){this.$props.propPlaces.push(new pe)},removePlace(e){this.$props.propPlaces.splice(e,1)},setTravelTime(e){const n=new et;n.toPlaceIndex=e,this.$props.propPlaces[e].travelTime=n}}});var Se=ae(nn,[["render",tn]]);const an={class:"edit_days narrow_content"},sn={class:"editDayCardContent"},ln={class:"editDayTitle"},rn=P("Delete this day"),on=P("Add another day");function dn(e,n,a,g,r,p){const h=f("close-outline"),T=f("n-icon"),d=f("n-button"),_=f("CEditPlaces"),m=f("n-card"),x=f("add");return $(),I("div",an,[($(!0),I(Te,null,De(e.days,(N,v)=>($(),te(m,{class:Ne(["editDay","day"+N.dayOf]),key:N.dayOf,hoverable:"","content-style":"padding: 0"},{default:y(()=>[c("div",sn,[c("div",ln,[c("b",null,"Day "+ft(N.dayOf),1),l(d,{class:"removeDay right_button",secondary:"",type:"error",onClick:b=>e.removeDay(v)},{default:y(()=>[l(T,null,{default:y(()=>[l(h)]),_:1}),rn]),_:2},1032,["onClick"])]),l(_,{class:"editPlaces",ref_for:!0,ref:"places"+v,propPlaces:N.propPlaces,"onUpdate:propPlaces":b=>N.propPlaces=b},null,8,["propPlaces","onUpdate:propPlaces"])])]),_:2},1032,["class"]))),128)),l(d,{class:"addDay right_button",onClick:n[0]||(n[0]=N=>e.pushDay())},{default:y(()=>[l(T,null,{default:y(()=>[l(x)]),_:1}),on]),_:1})])}const un=R({components:{Add:Re,CEditPlaces:Se,CloseOutline:Oe,NButton:ne,NCard:ht,NIcon:ke},props:{givenDays:{type:Array,required:!0}},data:()=>({days:[]}),beforeMount(){this.$data.days=this.$props.givenDays.slice(0).map(e=>new fe(e))},methods:{pushDay(){let e=new fe(new mt({places:[{}]}));e.dayOf=this.$data.days.length+1,this.$data.days.push(e)},removeDay(e){this.$data.days.splice(e,1);let n={};for(let r of this.$data.days)n[r.dayOf]=r;const a=this.$data.days.length;this.$data.days=[];let g=0;for(let r=0;r<a;r++){let p=n[r+g];for(;p==null&&r+g<a+5;)g++,p=n[r+g];p.dayOf=r+1,this.$data.days.push(p)}}}});var cn=ae(un,[["render",dn],["__scopeId","data-v-a3944dc6"]]);class pn{static getAllTypes(){return["name","description"]}constructor(n,a){this.type=n,this.label=this.getLabel(),this.value=a}getLabel(){switch(this.type){case"name":return"Name";case"description":return"Description";default:return"unknown_type"}}}class W extends $t{static fromJSON(n){return new W(n)}getObj(){return new ie(JSON.parse(this.obj))}}class Ce extends Tt{}class Me extends Dt{constructor(){super(...arguments),this.storage=xt.TRIP,this.storeCount=10}async genFetch(n){const a=await Ve(n);return Nt.isPWA()?a.ID!==-1?(this.storeObj(Ce,W,a.ID.toString(),Ie.stringify(a)),a):null:a}static genObj(n){return new Me().genObjImpl(Ce,W,n)}}async function Ve(e){const n=await ee.genGET("v2/trip/"+e);return new ie(n)}const fn={class:"edit_trip"},hn={class:"edit_form"},mn={class:"narrow_content"},vn={class:"editTripPrivacy"},gn=c("span",{class:"editLabel"},"Private:",-1),yn={class:"editInput"},_n={class:"editCity"},bn=c("span",{class:"editLabel"},"Cities:",-1),wn={class:"confirmationButtons narrow_content"},Cn=P("Save"),$n=P("Cancel"),Tn=P("Delete");function Dn(e,n,a,g,r,p){const h=f("CEditItem"),T=f("n-switch"),d=f("n-select"),_=f("CEditDays"),m=f("n-button");return $(),I("div",fn,[c("form",hn,[c("div",mn,[l(h,{className:"editTripName",label:"Name",ref:"name",val:e.trip.details.name.valueOf()},null,8,["val"]),l(h,{className:"editTripDescription",label:"Description",ref:"description",type:"textarea",val:e.trip.details.description.valueOf(),"val-max-count":e.descriptionMaxCharCount,"row-min-count":e.descriptionRowMinCount},null,8,["val","val-max-count","row-min-count"]),c("div",vn,[gn,c("div",yn,[l(T,{class:"editPrivacyToggle",value:e.private,"onUpdate:value":n[0]||(n[0]=x=>e.private=x)},null,8,["value"])])]),c("div",_n,[bn,l(d,{class:"editInput",value:e.cities,"onUpdate:value":n[1]||(n[1]=x=>e.cities=x),options:e.possibleCities,loading:e.cityLoading,filterable:"",multiple:"",placeholder:"",onSearch:e.searchCity},null,8,["value","options","loading","onSearch"])])]),l(_,{ref:"days",givenDays:e.trip.details.days},null,8,["givenDays"]),c("div",wn,[l(m,{class:"saveEditTrip left_col",type:"info",onClick:e.save,loading:e.saving},{default:y(()=>[Cn]),_:1},8,["onClick","loading"]),l(m,{class:"cancelEditTrip right_col",type:"default",onClick:e.cancel},{default:y(()=>[$n]),_:1},8,["onClick"]),e.isNew?xe("",!0):($(),te(m,{key:0,class:"deleteTrip right_col",onClick:e.confirmDelete,type:"error",loading:e.deleting},{default:y(()=>[Tn]),_:1},8,["onClick","loading"]))])])])}const xn=3,Nn=R({components:{NButton:ne,NSelect:kt,NSwitch:vt,CEditDays:cn,CEditItem:wt,CEditPlaces:Se},props:{trip:{type:ie,required:!0},isNew:{type:Boolean,required:!0}},emits:{save(e){return e.ID!==-1},cancel(){return!0}},data:()=>({cities:[],possibleCities:[],cityLoading:!1,private:!1,saving:!1,deleting:!1}),computed:{descriptionMaxCharCount(){return Y},descriptionRowMinCount(){return xn}},async beforeMount(){j.init(),await this.searchCity(""),this.update()},mounted(){M.get(M.get(this,"name"),"input").focus()},methods:{cancel(){var e;M.get(this,"days").$data.days=((e=this.$props.trip.details.days)!=null?e:[]).slice(0),this.$emit("cancel")},save(){let e=new gt;if(this.$data.cities.length<1){this.showAlert("Cities cannot be empty");return}this.$data.saving=!0;let n=[];for(const T of this.$data.cities){const d=new ge;d.ID=+T,n.push(d)}e.cities=n;const a=M.getVal(this,"name"),g=M.getVal(this,"description").split(`
`).join(" ");if(!this.checkValidNameDescription(a,g)){this.$data.saving=!1;return}e.name=a,e.description=g,e.days=[];const p=M.get(this,"days");let h=0;for(const T in p.days){const d=p.days[T].toDay(),_=this.filterPlaces(d.places);if(_===null){j.dialogError({title:"Invalid Link",content:"We currently only support links to limited websites including OpenStreetMap, Google Map, Bing Maps and Yelp.",positiveText:"OK"}),this.$data.saving=!1;return}_.length>0?(d.places=_,d.dayOf=d.dayOf-h,e.days.push(d)):h++}e.private=this.$data.private,e.ID=this.$props.trip.ID,this.$emit("save",e),this.$data.saving=!1},filterPlaces(e){let n=[];for(let a of e)if(a.label=a.label.trim(),a.URL=a.URL.trim(),a.label!=="")if(a.URL===""||this.filterPlace(a))a.description=a.description.split(`
`).join(" "),n.push(a);else return null;return n},filterPlace(e){const n=["https://goo.gl/maps/","https://google.com/maps/","https://www.google.com/maps/","https://maps.google.com/","https://www.openstreetmap.org/way/","https://www.bing.com/maps?","https://www.yelp.com/biz/"];for(const a of n)if(e.URL.startsWith(a))return!0;return!1},confirmDelete(){j.dialogWarning({title:"Delete trip",content:"Are you sure you want to delete this trip? THIS PROCESS IS IRREVERSIBLE.",positiveText:"Confirm",negativeText:"Cancel",onPositiveClick:async()=>{await this.del()},onNegativeClick:async()=>{}})},async del(){this.$data.deleting=!0;let e=Boolean(await ee.genDELETE("v2/trip/"+this.$props.trip.ID,Ie.stringify(this.$props.trip)));e||(e=(await Ve(this.$props.trip.ID.toString())).ID===-1),this.$data.deleting=!1,j.notifyTrigger("Trip Deletion",e?"Trip is successfully deleted!":"Trip deletion attempt failed.",e?_e.SUCCESS:_e.ERROR),e&&yt.genRedirectTo(_t.Landing)},tripToItem(e){return new pn(e,this.$props.trip[e])},update(){const e=[];for(const n of this.$props.trip.details.cities)e.push(n.ID.toString());this.$data.cities=e,this.$data.private=this.$props.trip.details.private.valueOf()},checkValidNameDescription(e,n){return!e||e.length<Ct?(this.showAlert("Trip name is too short."),!1):e.length>ye?(this.showAlert(`Trip name cannot be longer than ${ye}.`),!1):!n||n.length>Y?(this.showAlert(`Trip description cannot be longer than ${Y}.`),!1):!0},showAlert(e){j.dialogError({title:"Error",content:e,positiveText:"OK"})},async searchCity(e){this.$data.possibleCities=[];const n=[];for(const r of this.$props.trip.details.cities)this.$data.possibleCities.push({label:r.display.valueOf()+", "+r.iso2.valueOf(),value:r.ID.toString()}),n.push(r.ID.valueOf());this.$data.cityLoading=!0;const a=JSON.stringify(e),g=await ee.genPOST("cities",a);if(g===null){this.$data.cityLoading=!1;return}for(const r of g){const p=new ge(r);n.includes(p.ID.valueOf())||this.$data.possibleCities.push({label:p.display.valueOf()+", "+p.iso2.valueOf(),value:p.ID.toString()})}this.$data.cityLoading=!1}}});var Vn=ae(Nn,[["render",Dn]]);export{Vn as C,Me as T};
