var f=Object.defineProperty;var h=(t,e,r)=>e in t?f(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var n=(t,e,r)=>(h(t,typeof e!="symbol"?e+"":e,r),r);import{l as g,aN as p,aO as m,aP as O}from"./index-4c9b634d.js";class b{static isPWA(){switch("production"){case"production":return window.matchMedia("(display-mode: standalone)").matches;case"development":return!0}return!0}}class j{constructor(e){n(this,"order");n(this,"key");n(this,"obj");this.order=e.order,this.key=e.key,this.obj=e.obj}static paramsToRecord(e,r,a){return{order:e,key:r,obj:a}}getOrder(){return this.order}getKey(){return this.key}incrementOrder(){return this.order++,this.order}getObj(){const e=O(this.obj).replaceAll("\\'","'");return this.getObjImpl(e)}}function d(t,e){if(e===null)return null;try{const r=JSON.parse(e),a=[];for(const o of r)a.push(new t(o));return a}catch{return null}}class y{constructor(){n(this,"fromStorage",!1);n(this,"completed",null);n(this,"promise",null)}}class w{getStorage(){return g(this.storage)}setStorage(e){p(this.storage,JSON.stringify(e))}async genObjImpl(e,r,a){const o=new e;if(b.isPWA()){const s=d(r,this.getStorage());if(s!==null){for(const l of s)if(l.getKey()===a)return o.completed=l.getObj(),o.promise=this.genFetch(a),o.fromStorage=!0,o}}return o.completed=await this.genFetch(a),o.promise=null,o}storeObj(e,r,a,o){let s;try{s=d(r,this.getStorage())}catch{s=null}let l=0;if(s!==null){const i=[];for(const[c,u]of s.entries())u.getKey()===a?i.push(c):u.getOrder()>l&&(l=u.getOrder(),i.push(c)),u.incrementOrder();for(const c of i)s.length===1&&(s=[]),s.splice(c,1)}else s=[];s.push(new r(j.paramsToRecord(l,a,m(o)))),this.setStorage(s)}}function A(t){return t.replaceAll('"','\\"').replaceAll("	","").replaceAll(`
`,"\\n")}function P(t,e){return t.ID.valueOf()===e.ID.valueOf()&&t.details.bio.valueOf()===e.details.bio.valueOf()&&t.details.link.valueOf()===e.details.link.valueOf()&&t.details.name.valueOf()===e.details.name.valueOf()&&t.details.username.valueOf()===e.details.username.valueOf()}export{w as C,y as F,b as P,j as a,A as p,P as s};
