var T=Object.defineProperty;var w=(t,e,s)=>e in t?T(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var o=(t,e,s)=>(w(t,typeof e!="symbol"?e+"":e,s),s);import{C as I}from"./CTripInCarousel.490d70b5.js";import{C as d}from"./CityUtil.a674c2ed.js";import{C as V,_ as b,R as k,H as N,T as p}from"./index.c31fb35e.js";import{p as U,r,o as i,d as n,i as h,e as c,m as B,w as y,F as _,n as m,g as F,q as P,s as R,f as g,h as K,j as A,W as M}from"./vendor.95e19654.js";import"./CPlaces.1530bd35.js";class Q{constructor(e){o(this,"cities",[]);o(this,"length",0);o(this,"query","");e&&(this.cities=e.cities!==void 0&&e.cities!==null?U(V,e.cities):[],this.length=e.length!==void 0&&e.length!==null?e.length:0,this.query=e.query!==void 0&&e.query!==null?e.query:"")}toJsonKey(e){switch(e){case"cities":return"cities";case"length":return"length";case"query":return"query";default:return e}}}const W=t=>(P("data-v-389b6354"),t=t(),R(),t),H={class:"search_trip"},L=W(()=>h("h1",{class:"title"},"Search Trip",-1)),O={class:"tripSearchForm"},E=K("Find"),J={key:0,class:"tripSearchResultCarousel"},z={key:1,class:"tripSearchNoResultFound"};function D(t,e,s,l,u,X){const C=r("el-input"),f=r("el-option"),v=r("el-select"),$=r("el-button"),q=r("CTripInCarousel"),S=r("el-alert");return i(),n("div",H,[L,h("form",O,[c(C,{class:"tripSearchQueryInput",placeholder:"Trip to Alaska",modelValue:t.query,"onUpdate:modelValue":e[0]||(e[0]=a=>t.query=a),onKeyup:B(t.search,["enter","native"])},null,8,["modelValue","onKeyup"]),c(v,{class:"tripSearchCityInput",modelValue:t.selectedCities,"onUpdate:modelValue":e[1]||(e[1]=a=>t.selectedCities=a),filterable:"",multiple:"","no-match-text":"City not found",placeholder:"City"},{default:y(()=>[(i(!0),n(_,null,m(t.possibleCities,a=>(i(),g(f,{class:"tripSearchSingleCity",label:a.label,value:a.key},null,8,["label","value"]))),256))]),_:1},8,["modelValue"]),c($,{onClick:t.search},{default:y(()=>[E]),_:1},8,["onClick"])]),t.trips.length>0?(i(),n("div",J,[(i(!0),n(_,null,m(t.trips,a=>(i(),g(q,{trip:a},null,8,["trip"]))),256))])):t.searching?F("",!0):(i(),n("div",z,[c(S,{class:"narrow_content accountUnconfirmedAlertBar",title:"No results",description:"We could not find any trips that matches your search parameters. Please try again.",type:"error",closable:!1,"show-icon":""})]))])}const G=A({components:{CTripInCarousel:I},data:()=>({length:0,possibleCities:[],query:"",searching:!1,selectedCities:[],trips:[]}),async beforeMount(){var s,l,u;this.$data.searching=!0,this.$data.possibleCities=d.sortedCityList();const t=k.getParamMap(),e=+((s=t.get("length"))!=null?s:"");this.$data.length=isNaN(e)?0:e,this.$data.query=(l=t.get("query"))!=null?l:"",this.$data.selectedCities=d.stringToCities((u=t.get("cities"))!=null?u:""),await this.search(),this.$data.searching=!1},methods:{async search(){if(this.$data.selectedCities.length<1&&this.$data.query.length<1)return;const t=new Q({cities:this.$data.selectedCities,length:this.$data.length,query:this.$data.query});this.$data.searching=!0;const e=await N.genPOST("trip/search",M.stringify(t));if(this.$data.trips=[],e!==null){for(const s of e)new p(s).details.days.length>0&&this.$data.trips.push(new p(s));this.$data.searching=!1}}}});var se=b(G,[["render",D],["__scopeId","data-v-389b6354"]]);export{se as default};
