var ut=Object.defineProperty;var ct=(e,n,a)=>n in e?ut(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a;var ce=(e,n,a)=>(ct(e,typeof n!="symbol"?n+"":n,a),a);import{P as Ie,a as ht,D as Se,C as Ce}from"./DataProps.9366ecdf.js";import{d as P,M as d,y as he,s as Re,A as He,B as fe,a9 as We,z as U,D as Ke,a8 as Ge,aa as K,al as ft,E as pt,I as le,aX as vt,aY as Me,a4 as Pe,aZ as mt,ai as Ae,U as M,u as h,a1 as Oe,v as E,x as Ee,J as G,aq as $e,ap as S,K as gt,a_ as ke,P as q,a3 as bt,a5 as _t,a$ as yt,o as N,c as B,e as y,r as $,F as qe,g as Xe,a as u,w as D,h as Ne,l as Ye,n as Je,i as A,N as Ve,q as wt,b0 as Ze,_ as Be,t as Ct,m as $t,W as kt,T as Tt,b1 as xt,j as Dt,aW as Rt,G as Ue,R as Nt,k as Vt}from"./index.0fe575a2.js";import{u as Bt,N as Qe}from"./Input.e281243e.js";import{C as It,D as Te,E as Q,N as St,a as Fe}from"./E.cc713510.js";import{N as Le}from"./NaiveUtils.53143c2e.js";import{N as Mt}from"./Select.1f8f87bb.js";var Pt=P({name:"Add",render(){return d("svg",{width:"512",height:"512",viewBox:"0 0 512 512",fill:"none",xmlns:"http://www.w3.org/2000/svg"},d("path",{d:"M256 112V400M400 256H112",stroke:"currentColor","stroke-width":"32","stroke-linecap":"round","stroke-linejoin":"round"}))}}),At=P({name:"Remove",render(){return d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},d("line",{x1:"400",y1:"256",x2:"112",y2:"256",style:`
        fill: none;
        stroke: currentColor;
        stroke-linecap: round;
        stroke-linejoin: round;
        stroke-width: 32px;
      `}))}});function Ot(e){return e==null||typeof e=="string"&&e.trim()===""?null:Number(e)}function Et(e){return e.includes(".")&&(/^(-)?\d+.*(\.|0)$/.test(e)||/^\.\d+$/.test(e))}function xe(e){return e==null?!0:!Number.isNaN(e)}function Ut(e){return e==null?"":String(e)}function De(e){if(e===null)return null;if(typeof e=="number")return e;{const n=Number(e);return Number.isNaN(n)?null:n}}var Ft=he([Re("input-number-suffix",`
 display: inline-block;
 margin-right: 10px;
 `)]);const ze=800,je=100,Lt=Object.assign(Object.assign({},fe.props),{autofocus:Boolean,loading:{type:Boolean,default:void 0},placeholder:String,defaultValue:{type:Number,default:null},value:Number,step:{type:[Number,String],default:1},min:[Number,String],max:[Number,String],size:String,disabled:{type:Boolean,default:void 0},validator:Function,bordered:{type:Boolean,default:void 0},showButton:{type:Boolean,default:!0},readonly:Boolean,clearable:Boolean,keyboard:{type:Object,default:{}},updateValueOnInput:{type:Boolean,default:!0},status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onChange:[Function,Array]});var zt=P({name:"InputNumber",props:Lt,setup(e){const{mergedBorderedRef:n,mergedClsPrefixRef:a,mergedRtlRef:x}=He(e),r=fe("InputNumber","-input-number",Ft,mt,e,a),{localeRef:w}=Bt("InputNumber"),f=We(e),{mergedSizeRef:b,mergedDisabledRef:_,mergedStatusRef:k}=f,p=U(null),C=U(null),o=U(null),c=U(e.defaultValue),v=Ke(e,"value"),m=Ge(v,c),F=U(""),pe=t=>{const i=[e.min,e.max,e.step,t].map(s=>{const g=String(s).split(".")[1];return g?g.length:0});return Math.max(...i)},ve=K(()=>{const{placeholder:t}=e;return t!==void 0?t:w.value.placeholder}),X=K(()=>{const t=De(e.step);return t!==null?t===0?1:Math.abs(t):1}),se=K(()=>{const t=De(e.min);return t!==null?t:null}),oe=K(()=>{const t=De(e.max);return t!==null?t:null}),O=t=>{const{value:i}=m;if(t===i){l();return}const{"onUpdate:value":s,onUpdateValue:g,onChange:V}=e,{nTriggerFormInput:ie,nTriggerFormChange:R}=f;V&&M(V,t),g&&M(g,t),s&&M(s,t),c.value=t,ie(),R()},T=(t=0,i=!0,s=!1)=>{const{value:g}=F;if(s&&Et(g))return!1;const V=Ot(g);if(V===null)return i&&O(null),null;if(xe(V)){const ie=pe(V);let R=parseFloat((V+t).toFixed(ie));if(xe(R)){const{value:ye}=oe,{value:we}=se;if(ye!==null&&R>ye){if(!i||s)return!1;R=ye}if(we!==null&&R<we){if(!i||s)return!1;R=we}return e.validator&&!e.validator(R)?!1:(i&&O(R),R)}}return!1},l=()=>{const{value:t}=m;xe(t)?F.value=Ut(t):F.value=String(t)};l();const Y=K(()=>T(0,!1)===!1),L=K(()=>{const{value:t}=m;if(e.validator&&t===null)return!1;const{value:i}=X;return T(-i,!1)!==!1}),z=K(()=>{const{value:t}=m;if(e.validator&&t===null)return!1;const{value:i}=X;return T(+i,!1)!==!1});function ee(t){const{onFocus:i}=e,{nTriggerFormFocus:s}=f;i&&M(i,t),s()}function te(t){var i,s;if(t.target===((i=p.value)===null||i===void 0?void 0:i.wrapperElRef))return;const g=T();if(g!==!1){const R=(s=p.value)===null||s===void 0?void 0:s.inputElRef;R&&(R.value=String(g||"")),m.value===g&&l()}else l();const{onBlur:V}=e,{nTriggerFormBlur:ie}=f;V&&M(V,t),ie()}function me(t){const{onClear:i}=e;i&&M(i,t)}function ne(){const{value:t}=z;if(!t){ue();return}const{value:i}=m;if(i===null)e.validator||O(re());else{const{value:s}=X;T(s)}}function ae(){const{value:t}=L;if(!t){de();return}const{value:i}=m;if(i===null)e.validator||O(re());else{const{value:s}=X;T(-s)}}const ge=ee,j=te;function re(){if(e.validator)return null;const{value:t}=se,{value:i}=oe;return t!==null?Math.max(0,t):i!==null?Math.min(0,i):0}function be(t){me(t),O(null)}function H(t){var i,s,g;!((i=o.value)===null||i===void 0)&&i.$el.contains(t.target)&&t.preventDefault(),!((s=C.value)===null||s===void 0)&&s.$el.contains(t.target)&&t.preventDefault(),(g=p.value)===null||g===void 0||g.activate()}let I=null,W=null,J=null;function de(){J&&(window.clearTimeout(J),J=null),I&&(window.clearInterval(I),I=null)}function ue(){Z&&(window.clearTimeout(Z),Z=null),W&&(window.clearInterval(W),W=null)}function _e(){J=window.setTimeout(()=>{I=window.setInterval(()=>{ae()},je)},ze),Ae("mouseup",document,()=>{window.setTimeout(de,0)})}let Z=null;function at(){Z=window.setTimeout(()=>{W=window.setInterval(()=>{ne()},je)},ze),Ae("mouseup",document,()=>{window.setTimeout(ue,0)})}const it=()=>{W||ne()},lt=()=>{I||ae()};function st(t){var i,s;if(t.code==="Enter"||t.code==="NumpadEnter"){if(t.target===((i=p.value)===null||i===void 0?void 0:i.wrapperElRef))return;T()!==!1&&((s=p.value)===null||s===void 0||s.deactivate())}else if(t.code==="ArrowUp"){if(e.keyboard.ArrowUp===!1)return;t.preventDefault(),T()!==!1&&ne()}else if(t.code==="ArrowDown"){if(e.keyboard.ArrowDown===!1)return;t.preventDefault(),T()!==!1&&ae()}}function ot(t){F.value=t,e.updateValueOnInput&&T(0,!0,!0)}ft(m,()=>{l()});const rt={focus:()=>{var t;return(t=p.value)===null||t===void 0?void 0:t.focus()},blur:()=>{var t;return(t=p.value)===null||t===void 0?void 0:t.blur()}},dt=pt("InputNumber",x,a);return Object.assign(Object.assign({},rt),{rtlEnabled:dt,inputInstRef:p,minusButtonInstRef:C,addButtonInstRef:o,mergedClsPrefix:a,mergedBordered:n,uncontrolledValue:c,mergedValue:m,mergedPlaceholder:ve,displayedValueInvalid:Y,mergedSize:b,mergedDisabled:_,displayedValue:F,addable:z,minusable:L,mergedStatus:k,handleFocus:ge,handleBlur:j,handleClear:be,handleMouseDown:H,handleAddClick:it,handleMinusClick:lt,handleAddMousedown:at,handleMinusMousedown:_e,handleKeyDown:st,handleUpdateDisplayedValue:ot,mergedTheme:r,inputThemeOverrides:{paddingSmall:"0 8px 0 10px",paddingMedium:"0 8px 0 12px",paddingLarge:"0 8px 0 14px"},buttonThemeOverrides:le(()=>{const{self:{iconColorDisabled:t}}=r.value,[i,s,g,V]=vt(t);return{textColorTextDisabled:`rgb(${i}, ${s}, ${g})`,opacityDisabled:`${V}`}})})},render(){const{mergedClsPrefix:e}=this;return d("div",{class:[`${e}-input-number`,this.rtlEnabled&&`${e}-input-number--rtl`]},d(Qe,{ref:"inputInstRef",autofocus:this.autofocus,status:this.mergedStatus,bordered:this.mergedBordered,loading:this.loading,value:this.displayedValue,onUpdateValue:this.handleUpdateDisplayedValue,theme:this.mergedTheme.peers.Input,themeOverrides:this.mergedTheme.peerOverrides.Input,builtinThemeOverrides:this.inputThemeOverrides,size:this.mergedSize,placeholder:this.mergedPlaceholder,disabled:this.mergedDisabled,readonly:this.readonly,textDecoration:this.displayedValueInvalid?"line-through":void 0,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onClear:this.handleClear,clearable:this.clearable,internalLoadingBeforeSuffix:!0},{prefix:()=>{var n,a;return(a=(n=this.$slots).prefix)===null||a===void 0?void 0:a.call(n)},suffix:()=>{var n,a;return this.showButton?[this.$slots.suffix&&d("span",{class:`${e}-input-number-suffix`},{default:this.$slots.suffix}),d(Me,{text:!0,disabled:!this.minusable||this.mergedDisabled||this.readonly,focusable:!1,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleMinusClick,onMousedown:this.handleMinusMousedown,ref:"minusButtonInstRef"},{default:()=>d(Pe,{clsPrefix:e,"aria-disabled":!0},{default:()=>d(At,null)})}),d(Me,{text:!0,disabled:!this.addable||this.mergedDisabled||this.readonly,focusable:!1,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleAddClick,onMousedown:this.handleAddMousedown,ref:"addButtonInstRef"},{default:()=>d(Pe,{clsPrefix:e},{default:()=>d(Pt,null)})})]:(a=(n=this.$slots).suffix)===null||a===void 0?void 0:a.call(n)}}))}}),jt=Re("switch",`
 height: var(--n-height);
 min-width: var(--n-width);
 vertical-align: middle;
 user-select: none;
 display: inline-flex;
 outline: none;
 justify-content: center;
 align-items: center;
`,[h("children-placeholder",`
 height: var(--n-rail-height);
 display: flex;
 flex-direction: column;
 overflow: hidden;
 pointer-events: none;
 visibility: hidden;
 `),h("rail-placeholder",`
 display: flex;
 flex-wrap: none;
 `),h("button-placeholder",`
 width: calc(1.75 * var(--n-rail-height));
 height: var(--n-rail-height);
 `),Re("base-loading",`
 position: absolute;
 top: 50%;
 left: 50%;
 transform: translateX(-50%) translateY(-50%);
 font-size: calc(var(--n-button-width) - 4px);
 color: var(--n-loading-color);
 transition: color .3s var(--n-bezier);
 `,[Oe({originalTransform:"translateX(-50%) translateY(-50%)"})]),h("checked, unchecked",`
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
 box-sizing: border-box;
 position: absolute;
 white-space: nowrap;
 top: 0;
 bottom: 0;
 display: flex;
 align-items: center;
 line-height: 1;
 `),h("checked",`
 right: 0;
 padding-right: calc(1.25 * var(--n-rail-height) - var(--n-offset));
 `),h("unchecked",`
 left: 0;
 justify-content: flex-end;
 padding-left: calc(1.25 * var(--n-rail-height) - var(--n-offset));
 `),he("&:focus",[h("rail",`
 box-shadow: var(--n-box-shadow-focus);
 `)]),E("round",[h("rail",{borderRadius:"calc(var(--n-rail-height) / 2)"},[h("button",{borderRadius:"calc(var(--n-button-height) / 2)"})])]),Ee("disabled",[Ee("icon",[E("pressed",[h("rail",[h("button",{maxWidth:"var(--n-button-width-pressed)"})])]),h("rail",[he("&:active",[h("button",{maxWidth:"var(--n-button-width-pressed)"})])]),E("active",[E("pressed",[h("rail",[h("button",{left:"calc(100% - var(--n-offset) - var(--n-button-width-pressed))"})])]),h("rail",[he("&:active",[h("button",{left:"calc(100% - var(--n-offset) - var(--n-button-width-pressed))"})])])])])]),E("active",[h("rail",[h("button",{left:"calc(100% - (var(--n-rail-height) + var(--n-button-width)) / 2)"})])]),h("rail",`
 overflow: hidden;
 height: var(--n-rail-height);
 min-width: var(--n-rail-width);
 border-radius: var(--n-rail-border-radius);
 cursor: pointer;
 position: relative;
 transition:
 background .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
 background-color: var(--n-rail-color);
 `,[h("button-icon",`
 color: var(--n-icon-color);
 transition: color .3s var(--n-bezier);
 font-size: calc(var(--n-button-height) - 4px);
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 display: flex;
 justify-content: center;
 align-items: center;
 line-height: 1;
 `,[Oe()]),h("button",`
 align-items: center; 
 top: var(--n-offset);
 left: var(--n-offset);
 height: var(--n-button-width);
 width: var(--n-button-width-pressed);
 max-width: var(--n-button-width);
 border-radius: var(--n-button-border-radius);
 background-color: var(--n-button-color);
 box-shadow: var(--n-button-box-shadow);
 box-sizing: border-box;
 cursor: inherit;
 content: "";
 position: absolute;
 transition:
 background-color .3s var(--n-bezier),
 left .3s var(--n-bezier),
 opacity .3s var(--n-bezier),
 max-width .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
 `)]),E("active",[h("rail","background-color: var(--n-rail-color-active);")]),E("disabled",[h("rail",`
 cursor: not-allowed;
 opacity: .5;
 `)]),E("loading",[h("rail",`
 pointer-events: none;
 `)])]);const Ht=Object.assign(Object.assign({},fe.props),{size:{type:String,default:"medium"},value:{type:[String,Number,Boolean],default:void 0},loading:Boolean,defaultValue:{type:[String,Number,Boolean],default:!1},disabled:{type:Boolean,default:void 0},round:{type:Boolean,default:!0},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],checkedValue:{type:[String,Number,Boolean],default:!0},uncheckedValue:{type:[String,Number,Boolean],default:!1},railStyle:Function,onChange:[Function,Array]});var Wt=P({name:"Switch",props:Ht,setup(e){const{mergedClsPrefixRef:n,inlineThemeDisabled:a}=He(e),x=fe("Switch","-switch",jt,yt,e,n),r=We(e),{mergedSizeRef:w,mergedDisabledRef:f}=r,b=U(e.defaultValue),_=Ke(e,"value"),k=Ge(_,b),p=le(()=>k.value===e.checkedValue),C=U(!1),o=U(!1),c=le(()=>{const{railStyle:l}=e;if(!!l)return l({focused:o.value,checked:p.value})});function v(l){const{"onUpdate:value":Y,onChange:L,onUpdateValue:z}=e,{nTriggerFormInput:ee,nTriggerFormChange:te}=r;Y&&M(Y,l),z&&M(z,l),L&&M(L,l),b.value=l,ee(),te()}function m(){const{nTriggerFormFocus:l}=r;l()}function F(){const{nTriggerFormBlur:l}=r;l()}function pe(){e.loading||f.value||(k.value!==e.checkedValue?v(e.checkedValue):v(e.uncheckedValue))}function ve(){o.value=!0,m()}function X(){o.value=!1,F(),C.value=!1}function se(l){e.loading||f.value||l.code==="Space"&&(k.value!==e.checkedValue?v(e.checkedValue):v(e.uncheckedValue),C.value=!1)}function oe(l){e.loading||f.value||l.code==="Space"&&(l.preventDefault(),C.value=!0)}const O=le(()=>{const{value:l}=w,{self:{opacityDisabled:Y,railColor:L,railColorActive:z,buttonBoxShadow:ee,buttonColor:te,boxShadowFocus:me,loadingColor:ne,textColor:ae,iconColor:ge,[G("buttonHeight",l)]:j,[G("buttonWidth",l)]:re,[G("buttonWidthPressed",l)]:be,[G("railHeight",l)]:H,[G("railWidth",l)]:I,[G("railBorderRadius",l)]:W,[G("buttonBorderRadius",l)]:J},common:{cubicBezierEaseInOut:de}}=x.value,ue=$e((S(H)-S(j))/2),_e=$e(Math.max(S(H),S(j))),Z=S(H)>S(j)?I:$e(S(I)+S(j)-S(H));return{"--n-bezier":de,"--n-button-border-radius":J,"--n-button-box-shadow":ee,"--n-button-color":te,"--n-button-width":re,"--n-button-width-pressed":be,"--n-button-height":j,"--n-height":_e,"--n-offset":ue,"--n-opacity-disabled":Y,"--n-rail-border-radius":W,"--n-rail-color":L,"--n-rail-color-active":z,"--n-rail-height":H,"--n-rail-width":I,"--n-width":Z,"--n-box-shadow-focus":me,"--n-loading-color":ne,"--n-text-color":ae,"--n-icon-color":ge}}),T=a?gt("switch",le(()=>w.value[0]),O,e):void 0;return{handleClick:pe,handleBlur:X,handleFocus:ve,handleKeyup:se,handleKeydown:oe,mergedRailStyle:c,pressed:C,mergedClsPrefix:n,mergedValue:k,checked:p,mergedDisabled:f,cssVars:a?void 0:O,themeClass:T==null?void 0:T.themeClass,onRender:T==null?void 0:T.onRender}},render(){const{mergedClsPrefix:e,mergedDisabled:n,checked:a,mergedRailStyle:x,onRender:r,$slots:w}=this;r==null||r();const{checked:f,unchecked:b,icon:_,"checked-icon":k,"unchecked-icon":p}=w,C=!(ke(_)&&ke(k)&&ke(p));return d("div",{role:"switch","aria-checked":a,class:[`${e}-switch`,this.themeClass,C&&`${e}-switch--icon`,a&&`${e}-switch--active`,n&&`${e}-switch--disabled`,this.round&&`${e}-switch--round`,this.loading&&`${e}-switch--loading`,this.pressed&&`${e}-switch--pressed`],tabindex:this.mergedDisabled?void 0:0,style:this.cssVars,onClick:this.handleClick,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyup:this.handleKeyup,onKeydown:this.handleKeydown},d("div",{class:`${e}-switch__rail`,"aria-hidden":"true",style:x},q(f,o=>q(b,c=>o||c?d("div",{"aria-hidden":!0,class:`${e}-switch__children-placeholder`},d("div",{class:`${e}-switch__rail-placeholder`},d("div",{class:`${e}-switch__button-placeholder`}),o),d("div",{class:`${e}-switch__rail-placeholder`},d("div",{class:`${e}-switch__button-placeholder`}),c)):null)),d("div",{class:`${e}-switch__button`},q(_,o=>q(k,c=>q(p,v=>d(bt,null,{default:()=>this.loading?d(_t,{key:"loading",clsPrefix:e,strokeWidth:20}):this.checked&&(c||o)?d("div",{class:`${e}-switch__button-icon`,key:c?"checked-icon":"icon"},c||o):!this.checked&&(v||o)?d("div",{class:`${e}-switch__button-icon`,key:v?"unchecked-icon":"icon"},v||o):null})))),q(f,o=>o&&d("div",{key:"checked",class:`${e}-switch__checked`},o)),q(b,o=>o&&d("div",{key:"unchecked",class:`${e}-switch__unchecked`},o)))))}});const Kt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Gt=y("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M256 112v288"},null,-1),qt=y("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M400 256H112"},null,-1),Xt=[Gt,qt];var et=P({name:"Add",render:function(n,a){return N(),B("svg",Kt,Xt)}});const Yt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Jt=y("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M368 368L144 144"},null,-1),Zt=y("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M368 144L144 368"},null,-1),Qt=[Jt,Zt];var tt=P({name:"CloseOutline",render:function(n,a){return N(),B("svg",Yt,Qt)}});const en={class:"edit_places"},tn={class:"places"},nn={key:0,class:"editTravelTime"},an={key:0,class:"travelTimeInput"},ln=y("div",{class:"travelTimeLabel"},"Travel time",-1),sn=A("minutes"),on=A("Set travel time"),rn=y("br",null,null,-1),dn=A("Delete this place"),un=A("Add another place");function cn(e,n,a,x,r,w){const f=$("n-divider"),b=$("n-input-number"),_=$("n-button"),k=$("n-input"),p=$("close-outline"),C=$("n-icon"),o=$("add");return N(),B("div",en,[y("ul",tn,[(N(!0),B(qe,null,Xe(e.propPlaces,(c,v)=>(N(),B("li",{class:"place",key:v},[v>0?(N(),B("div",nn,[u(f,{class:"editPlaceDivider"}),c.travelTime!==void 0?(N(),B("div",an,[ln,u(b,{placeholder:"Travel time (in minutes)",type:"text",min:0,value:c.travelTime.timeInMinutes,"onUpdate:value":m=>c.travelTime.timeInMinutes=m},{suffix:D(()=>[sn]),_:2},1032,["value","onUpdate:value"])])):(N(),Ne(_,{key:1,class:"setTravelTime",type:"default",onClick:m=>e.setTravelTime(v)},{default:D(()=>[on]),_:2},1032,["onClick"])),u(f,{class:"editPlaceDivider"})])):Ye("",!0),y("div",{class:Je(["editPlace","place"+v])},[u(k,{class:"inputPlaceLabel",value:c.place.label,"onUpdate:value":m=>c.place.label=m,type:"text",placeholder:"Place Name"+(v!==0?"":" (eg. Golden Gate Bridge)")},null,8,["value","onUpdate:value","placeholder"]),u(k,{class:"inputPlaceLink",value:c.place.URL,"onUpdate:value":m=>c.place.URL=m,type:"text",placeholder:"Link"+(v!==0?"":" (eg. Google Map link)")},null,8,["value","onUpdate:value","placeholder"]),rn,u(k,{class:"inputPlaceDesc",value:c.place.description,"onUpdate:value":m=>c.place.description=m,type:"textarea",placeholder:v!==0?"Description":"Elaborate more about why you include this place in the trip!",rows:3},null,8,["value","onUpdate:value","placeholder"]),u(_,{class:"removePlace wide_button",type:"error",secondary:"",onClick:m=>e.removePlace(v)},{default:D(()=>[u(C,null,{default:D(()=>[u(p)]),_:1}),dn]),_:2},1032,["onClick"])],2)]))),128))]),u(f,{class:"editPlaceDivider"}),u(_,{class:"addPlace wide_button",onClick:e.pushPlace},{default:D(()=>[u(C,null,{default:D(()=>[u(o)]),_:1}),un]),_:1},8,["onClick"])])}const hn=P({name:"CEditPlaces",components:{Add:et,CloseOutline:tt,NButton:Ve,NDivider:wt,NIcon:Ze,NInput:Qe,NInputNumber:zt},model:{props:{propPlaces:Array()},emits:["update:propPlaces"]},props:{propPlaces:{type:Array,default:()=>[],validator:function(e){return Array.isArray(e)?(e.forEach(n=>{if(!(n instanceof Ie))return!1}),!0):!1}}},methods:{pushPlace(){this.$props.propPlaces.push(new Ie)},removePlace(e){this.$props.propPlaces.splice(e,1)},setTravelTime(e){const n=new ht;n.toPlaceIndex=e,this.$props.propPlaces[e].travelTime=n}}});var nt=Be(hn,[["render",cn]]);const fn={class:"edit_days narrow_content"},pn={class:"editDayCardContent"},vn={class:"editDayTitle"},mn=A("Delete this day"),gn=A("Add another day");function bn(e,n,a,x,r,w){const f=$("close-outline"),b=$("n-icon"),_=$("n-button"),k=$("CEditPlaces"),p=$("n-card"),C=$("add");return N(),B("div",fn,[(N(!0),B(qe,null,Xe(e.days,(o,c)=>(N(),Ne(p,{class:Je(["editDay","day"+o.dayOf]),key:o.dayOf,hoverable:"","content-style":"padding: 0"},{default:D(()=>[y("div",pn,[y("div",vn,[y("b",null,"Day "+Ct(o.dayOf),1),u(_,{class:"removeDay right_button",secondary:"",type:"error",onClick:v=>e.removeDay(c)},{default:D(()=>[u(b,null,{default:D(()=>[u(f)]),_:1}),mn]),_:2},1032,["onClick"])]),u(k,{class:"editPlaces",ref_for:!0,ref:"places"+c,propPlaces:o.propPlaces,"onUpdate:propPlaces":v=>o.propPlaces=v},null,8,["propPlaces","onUpdate:propPlaces"])])]),_:2},1032,["class"]))),128)),u(_,{class:"addDay right_button",onClick:n[0]||(n[0]=o=>e.pushDay())},{default:D(()=>[u(b,null,{default:D(()=>[u(C)]),_:1}),gn]),_:1})])}const _n=P({components:{Add:et,CEditPlaces:nt,CloseOutline:tt,NButton:Ve,NCard:$t,NIcon:Ze},props:{givenDays:{type:Array,required:!0}},data:()=>({days:[]}),beforeMount(){this.$data.days=this.$props.givenDays.slice(0).map(e=>new Se(e))},methods:{pushDay(){let e=new Se(new kt({places:[{}]}));e.dayOf=this.$data.days.length+1,this.$data.days.push(e)},removeDay(e){this.$data.days.splice(e,1);let n={};for(let r of this.$data.days)n[r.dayOf]=r;const a=this.$data.days.length;this.$data.days=[];let x=0;for(let r=0;r<a;r++){let w=n[r+x];for(;w==null&&r+x<a+5;)x++,w=n[r+x];w.dayOf=r+1,this.$data.days.push(w)}}}});var yn=Be(_n,[["render",bn],["__scopeId","data-v-3103462c"]]);class wn{constructor(n,a){ce(this,"type");ce(this,"label");ce(this,"value");this.type=n,this.label=this.getLabel(),this.value=a}static getAllTypes(){return["name","description"]}getLabel(){switch(this.type){case"name":return"Name";case"description":return"Description";default:return"unknown_type"}}}const Cn={class:"edit_trip"},$n={class:"edit_form"},kn={class:"narrow_content"},Tn={class:"editTripPrivacy"},xn=y("span",{class:"editLabel"},"Private:",-1),Dn={class:"editInput"},Rn={class:"editCity"},Nn=y("span",{class:"editLabel"},"Cities:",-1),Vn={class:"confirmationButtons narrow_content"},Bn=A("Save"),In=A("Cancel"),Sn=A("Delete");function Mn(e,n,a,x,r,w){const f=$("CEditItem"),b=$("n-switch"),_=$("n-select"),k=$("CEditDays"),p=$("n-button");return N(),B("div",Cn,[y("form",$n,[y("div",kn,[u(f,{className:"editTripName",label:"Name",ref:"name",val:e.trip.details.name.valueOf()},null,8,["val"]),u(f,{className:"editTripDescription",label:"Description",ref:"description",type:"textarea",val:e.trip.details.description.valueOf(),"val-max-count":e.descriptionMaxCharCount,"row-min-count":e.descriptionRowMinCount},null,8,["val","val-max-count","row-min-count"]),y("div",Tn,[xn,y("div",Dn,[u(b,{class:"editPrivacyToggle",value:e.private,"onUpdate:value":n[0]||(n[0]=C=>e.private=C)},null,8,["value"])])]),y("div",Rn,[Nn,u(_,{class:"editInput",value:e.cities,"onUpdate:value":n[1]||(n[1]=C=>e.cities=C),options:e.possibleCities,filterable:"",multiple:"",placeholder:""},null,8,["value","options"])])]),u(k,{ref:"days",givenDays:e.trip.details.days},null,8,["givenDays"]),y("div",Vn,[u(p,{class:"saveEditTrip left_col",type:"info",onClick:e.save,loading:e.saving},{default:D(()=>[Bn]),_:1},8,["onClick","loading"]),u(p,{class:"cancelEditTrip right_col",type:"default",onClick:e.cancel},{default:D(()=>[In]),_:1},8,["onClick"]),e.isNew?Ye("",!0):(N(),Ne(p,{key:0,class:"deleteTrip right_col",onClick:e.confirmDelete,type:"error",loading:e.deleting},{default:D(()=>[Sn]),_:1},8,["onClick","loading"]))])])])}const Pn=3,An=P({components:{NButton:Ve,NSelect:Mt,NSwitch:Wt,CEditDays:yn,CEditItem:It,CEditPlaces:nt},props:{trip:{type:Tt,required:!0},isNew:{type:Boolean,required:!0}},emits:{save(e){return e.ID!==-1},cancel(){return!0}},data:()=>({cities:[],possibleCities:[],private:!1,saving:!1,deleting:!1}),computed:{descriptionMaxCharCount(){return Te},descriptionRowMinCount(){return Pn}},beforeMount(){Le.init(),this.update()},mounted(){Q.get(Q.get(this,"name"),"input").focus()},methods:{cancel(){var e;Q.get(this,"days").$data.days=((e=this.$props.trip.details.days)!=null?e:[]).slice(0),this.$emit("cancel")},save(){let e=new xt;if(this.$data.cities.length<1){this.showAlert("Cities cannot be empty");return}this.$data.saving=!0,e.cities=Ce.stringToCities(this.$data.cities.join(","));const n=Q.getVal(this,"name"),a=Q.getVal(this,"description").split(`
`).join(" ");if(!this.checkValidNameDescription(n,a)){this.$data.saving=!1;return}e.name=n,e.description=a,e.days=[];const r=Q.get(this,"days");let w=0;for(const f in r.days){const b=r.days[f].toDay(),_=this.filterPlaces(b.places);if(_===null){this.$alert("We currently only support links to limited websites including OpenStreetMap, Google Map, Bing Maps and Yelp.","Invalid Link",{confirmButtonText:"OK"}),this.$data.saving=!1;return}_.length>0?(b.places=_,b.dayOf=b.dayOf-w,e.days.push(b)):w++}e.private=this.$data.private,e.ID=this.$props.trip.ID,this.$emit("save",e),this.$data.saving=!1},filterPlaces(e){let n=[];for(let a of e)if(a.label=a.label.trim(),a.URL=a.URL.trim(),a.label!=="")if(a.URL===""||this.filterPlace(a))a.description=a.description.split(`
`).join(" "),n.push(a);else return null;return n},filterPlace(e){const n=["https://goo.gl/maps/","https://google.com/maps/","https://www.google.com/maps/","https://maps.google.com/","https://www.openstreetmap.org/way/","https://www.bing.com/maps?","https://www.yelp.com/biz/"];for(const a of n)if(e.URL.startsWith(a))return!0;return!1},confirmDelete(){Le.dialogWarning({title:"Delete trip",content:"Are you sure you want to delete this trip? THIS PROCESS IS IRREVERSIBLE.",positiveText:"Confirm",negativeText:"Cancel",onPositiveClick:async()=>{await this.del()},onNegativeClick:async()=>{}})},async del(){this.$data.deleting=!0;let e=Boolean(await Dt.genDELETE("v2/trip/"+this.$props.trip.ID,Rt.stringify(this.$props.trip)));e||(e=(await Ue.genTrip(this.$props.trip.ID.valueOf())).ID===-1),this.$data.deleting=!1,this.$notify(Ue.notifConfig("Trip Deletion",e?"Trip is successfully deleted!":"Trip deletion attempt failed.",e?"success":"error")),e&&Nt.genRedirectTo(Vt.Landing)},tripToItem(e){return new wn(e,this.$props.trip[e])},update(){this.$data.possibleCities=Ce.sortedCityOptions(),this.$data.cities=Ce.stringToCityStringArray(this.$props.trip.details.cities.join(",")),this.$data.private=this.$props.trip.details.private.valueOf()},checkValidNameDescription(e,n){return!e||e.length<St?(this.showAlert("Trip name is too short."),!1):e.length>Fe?(this.showAlert(`Trip name cannot be longer than ${Fe}.`),!1):!n||n.length>Te?(this.showAlert(`Trip description cannot be longer than ${Te}.`),!1):!0},showAlert(e){this.$alert(e,"",{confirmButtonText:"OK"})}}});var Hn=Be(An,[["render",Mn]]);export{Hn as C};
