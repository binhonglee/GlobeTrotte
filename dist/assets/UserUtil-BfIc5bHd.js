var h=Object.defineProperty;var p=(t,e,r)=>e in t?h(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var n=(t,e,r)=>p(t,typeof e!="symbol"?e+"":e,r);import{k as g,aN as m,j as f}from"./index-CVwEz7sZ.js";class O{static isPWA(){return window.matchMedia("(display-mode: standalone)").matches}}class b{constructor(e){n(this,"order");n(this,"key");n(this,"obj");this.order=e.order,this.key=e.key,this.obj=e.obj}static paramsToRecord(e,r,o){return{order:e,key:r,obj:o}}getOrder(){return this.order}getKey(){return this.key}incrementOrder(){return this.order++,this.order}getObj(){const e=f.stringUnescape(this.obj).replaceAll("\\'","'");return this.getObjImpl(e)}}function d(t,e){if(e===null)return null;try{const r=JSON.parse(e),o=[];for(const a of r)o.push(new t(a));return o}catch{return null}}class S{constructor(){n(this,"fromStorage",!1);n(this,"completed",null);n(this,"promise",null)}}class y{getStorage(){return g(this.storage)}setStorage(e){m(this.storage,JSON.stringify(e))}async genObjImpl(e,r,o){const a=new e;if(O.isPWA()){const s=d(r,this.getStorage());if(s!==null){for(const l of s)if(l.getKey()===o)return a.completed=l.getObj(),a.promise=this.genFetch(o),a.fromStorage=!0,a}}return a.completed=await this.genFetch(o),a.promise=null,a}storeObj(e,r,o,a){let s;try{s=d(r,this.getStorage())}catch{s=null}let l=0;if(s!==null){const i=[];for(const[c,u]of s.entries())u.getKey()===o?i.push(c):u.getOrder()>l&&(l=u.getOrder(),i.push(c)),u.incrementOrder();for(const c of i)s.length===1&&(s=[]),s.splice(c,1)}else s=[];s.push(new r(b.paramsToRecord(l,o,f.stringEscape(a)))),this.setStorage(s)}}function w(t){return t.replaceAll('"','\\"').replaceAll("	","").replaceAll(`
`,"\\n")}function A(t,e){return t.ID.valueOf()===e.ID.valueOf()&&t.details.bio.valueOf()===e.details.bio.valueOf()&&t.details.link.valueOf()===e.details.link.valueOf()&&t.details.name.valueOf()===e.details.name.valueOf()&&t.details.username.valueOf()===e.details.username.valueOf()}export{y as C,S as F,O as P,b as a,w as p,A as s};
