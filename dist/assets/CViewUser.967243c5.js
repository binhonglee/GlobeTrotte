import{a as w}from"./CPlaces.9ac9a04e.js";import{C as k}from"./CShare.a40488ad.js";import{C as T}from"./CTripPreviewCard.8debef9a.js";import{U as $,G as U,R as E,a as _,H as L,_ as N}from"./index.4a453efe.js";import{T as R}from"./TripUtil.cf3da4e6.js";import{r,o as t,d as o,i as p,C as h,g as s,f as n,w as a,h as i,e as l,F as B,y as P,t as S,v as A,j as I,M as b,z as V,G as D}from"./vendor.bef68fa6.js";const G=e=>(S("data-v-01a2f359"),e=e(),A(),e),O={class:"view_user"},M={class:"userInfo narrow_content"},j={key:0,class:"userName left_col"},q={key:1,class:"userBio"},z={class:"externalLink"},F={key:3,class:"userInfoButtonGroups"},H=i("Logout"),J=i("Edit"),K={class:"viewUserTrips"},Q=G(()=>p("h2",null,"Trips",-1)),W={key:0,class:"createTripAlertDiv"},X=i("Seems like you have not shared any of your own trips."),Y=i("Create New Trip");function Z(e,u,d,ee,te,se){const f=r("CExternalLink"),m=r("CShare"),c=r("n-button"),y=r("n-divider"),g=r("CTripPreviewCard"),C=r("n-alert");return t(),o("div",O,[p("div",M,[e.showName?(t(),o("h2",j,h(e.user.details.name),1)):s("",!0),e.user.details.bio!==""?(t(),o("p",q,h(e.user.details.bio),1)):s("",!0),p("div",z,[e.user.details.link!==""?(t(),n(f,{key:0,underline:"hover",url:e.user.details.link.valueOf()},{default:a(()=>[i(h(e.user.details.link),1)]),_:1},8,["url"])):s("",!0)]),e.self?(t(),n(m,{key:2,shareURL:e.shareURL,onClick:e.onShare},null,8,["shareURL","onClick"])):s("",!0),e.self?(t(),o("div",F,[l(c,{class:"myAccountLogout left_col",type:"error",onClick:e.logout},{default:a(()=>[H]),_:1},8,["onClick"]),l(c,{class:"myAccountEdit right_col",type:"default",ref:"edit",onClick:e.toggleEdit},{default:a(()=>[J]),_:1},8,["onClick"])])):s("",!0)]),l(y,{class:"viewUserDivider"}),p("div",K,[Q,(t(!0),o(B,null,P(e.trips,v=>(t(),n(g,{trip:v,wide:!0,"limit-height":!1},null,8,["trip"]))),256)),e.self&&e.tripsEmpty?(t(),o("div",W,[l(C,{class:"createTripAlert",type:"default","show-icon":!1},{default:a(()=>[X,e.confirmed?(t(),n(c,{key:0,class:"createTripButton",type:"info",onClick:e.newTrip,size:"large"},{default:a(()=>[Y]),_:1},8,["onClick"])):s("",!0)]),_:1})])):s("",!0)])])}const x=I({name:"CViewUser",components:{CExternalLink:w,CShare:k,CTripPreviewCard:T,NAlert:b,NButton:V,NDivider:D},props:{user:{type:$,required:!0},showName:{type:Boolean,default:!0},self:{type:Boolean,default:!1},confirmed:{type:Boolean,default:!1}},emits:{logout(){return!0},toggleEdit(){return!0}},data:()=>({trips:[],lastPopulated:[],tripsEmpty:!0,shareURL:""}),async beforeMount(){await this.genPopulateTrips()},async beforeUpdate(){await this.genPopulateTrips()},methods:{compareArray(e,u){if(e.length!==u.length)return!1;for(let d in e)if(e[d]!==u[d])return!1;return!0},async genPopulateTrips(){this.compareArray(this.$data.lastPopulated,this.$props.user.trips)||(this.$data.trips=await Promise.all(this.$props.user.trips.map(async e=>await U.genTrip(e.ID.valueOf()))),R.sortTripsMostRecentlyUpdated(this.$data.trips),this.$data.tripsEmpty=this.$data.trips.length<=0,this.$data.lastPopulated=this.$props.user.trips)},logout(){this.$emit("logout")},toggleEdit(){this.$emit("toggleEdit")},async newTrip(){await E.genRedirectTo(_.trip_New)},onShare(){let e=this.$props.user.details.username.valueOf();e===""&&(e=this.$props.user.details.ID.toString()),this.$data.shareURL=L.getAbsoluteURL(_.User,e)}}});var pe=N(x,[["render",Z],["__scopeId","data-v-01a2f359"]]);export{pe as C};
