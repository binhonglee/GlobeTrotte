var st=Object.defineProperty;var rt=(e,n,a)=>n in e?st(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a;var de=(e,n,a)=>(rt(e,typeof n!="symbol"?n+"":n,a),a);import{N as dt,P as Ie,b as ut,D as Se,C as Ce}from"./DataProps.8dd5a3be.js";import{i as O,K as r,v as ue,m as Ne,y as je,z as ce,a8 as We,x as L,B as Ke,a9 as W,Y as ct,D as ie,aX as ht,aY as Me,a4 as Pe,aZ as ft,ah as Ae,Q as A,q as h,a1 as Oe,s as F,u as Ee,E as K,az as $e,ay as P,I as pt,aM as ke,M as G,a3 as vt,a5 as mt,a_ as gt,o as R,c as S,b as y,r as C,F as Ge,f as Xe,d,e as T,g as Re,k as qe,n as Ye,h as E,N as Ve,_ as Be,t as bt,l as _t,V as yt,T as wt,a$ as Ct,H as $t,aW as kt,G as Ue,R as xt,j as Tt}from"./index.aaf24c90.js";import{N as Qe}from"./Icon.fdedd375.js";import{u as Dt,a as Ze,N as Je}from"./Input.8e3eb2ef.js";import{C as Nt,D as xe,E as Z,N as Rt,a as Fe}from"./E.713eaada.js";import{N as Le}from"./NaiveUtils.aba419b5.js";import{N as Vt}from"./Select.ad6958d4.js";var Bt=O({name:"Add",render(){return r("svg",{width:"512",height:"512",viewBox:"0 0 512 512",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r("path",{d:"M256 112V400M400 256H112",stroke:"currentColor","stroke-width":"32","stroke-linecap":"round","stroke-linejoin":"round"}))}}),It=O({name:"Remove",render(){return r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},r("line",{x1:"400",y1:"256",x2:"112",y2:"256",style:`
        fill: none;
        stroke: currentColor;
        stroke-linecap: round;
        stroke-linejoin: round;
        stroke-width: 32px;
      `}))}});function St(e){return e==null||typeof e=="string"&&e.trim()===""?null:Number(e)}function Mt(e){return e.includes(".")&&(/^(-)?\d+.*(\.|0)$/.test(e)||/^\.\d+$/.test(e))}function Te(e){return e==null?!0:!Number.isNaN(e)}function Pt(e){return e==null?"":String(e)}function De(e){if(e===null)return null;if(typeof e=="number")return e;{const n=Number(e);return Number.isNaN(n)?null:n}}var At=ue([Ne("input-number-suffix",`
 display: inline-block;
 margin-right: 10px;
 `)]);const ze=800,He=100,Ot=Object.assign(Object.assign({},ce.props),{loading:{type:Boolean,default:void 0},placeholder:String,defaultValue:{type:Number,default:null},value:Number,step:{type:[Number,String],default:1},min:[Number,String],max:[Number,String],size:String,disabled:{type:Boolean,default:void 0},validator:Function,bordered:{type:Boolean,default:void 0},showButton:{type:Boolean,default:!0},readonly:Boolean,clearable:Boolean,keyboard:{type:Object,default:{}},updateValueOnInput:{type:Boolean,default:!0},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onChange:[Function,Array]});var Et=O({name:"InputNumber",props:Ot,setup(e){const{mergedBorderedRef:n,mergedClsPrefixRef:a}=je(e),x=ce("InputNumber","-input-number",At,ft,e,a),{localeRef:u}=Dt("InputNumber"),v=We(e),{mergedSizeRef:g,mergedDisabledRef:b,mergedStatusRef:_}=v,f=L(null),k=L(null),w=L(null),l=L(e.defaultValue),p=Ke(e,"value"),o=Ze(p,l),$=L(""),he=t=>{const i=[e.min,e.max,e.step,t].map(s=>{const m=String(s).split(".")[1];return m?m.length:0});return Math.max(...i)},fe=W(()=>{const{placeholder:t}=e;return t!==void 0?t:u.value.placeholder}),X=W(()=>{const t=De(e.step);return t!==null?t===0?1:Math.abs(t):1}),le=W(()=>{const t=De(e.min);return t!==null?t:null}),oe=W(()=>{const t=De(e.max);return t!==null?t:null}),z=t=>{const{value:i}=o;if(t===i){V();return}const{"onUpdate:value":s,onUpdateValue:m,onChange:B}=e,{nTriggerFormInput:ae,nTriggerFormChange:N}=v;B&&A(B,t),m&&A(m,t),s&&A(s,t),l.value=t,ae(),N()},D=(t=0,i=!0,s=!1)=>{const{value:m}=$;if(s&&Mt(m))return!1;const B=St(m);if(B===null)return i&&z(null),null;if(Te(B)){const ae=he(B);let N=parseFloat((B+t).toFixed(ae));if(Te(N)){const{value:ye}=oe,{value:we}=le;if(ye!==null&&N>ye){if(!i||s)return!1;N=ye}if(we!==null&&N<we){if(!i||s)return!1;N=we}return e.validator&&!e.validator(N)?!1:(i&&z(N),N)}}return!1},V=()=>{const{value:t}=o;Te(t)?$.value=Pt(t):$.value=String(t)};V();const c=W(()=>D(0,!1)===!1),H=W(()=>{const{value:t}=o;if(e.validator&&t===null)return!1;const{value:i}=X;return D(-i,!1)!==!1}),j=W(()=>{const{value:t}=o;if(e.validator&&t===null)return!1;const{value:i}=X;return D(+i,!1)!==!1});function q(t){const{onFocus:i}=e,{nTriggerFormFocus:s}=v;i&&A(i,t),s()}function J(t){var i,s;if(t.target===((i=f.value)===null||i===void 0?void 0:i.wrapperElRef))return;const m=D();if(m!==!1){const N=(s=f.value)===null||s===void 0?void 0:s.inputElRef;N&&(N.value=String(m||"")),o.value===m&&V()}else V();const{onBlur:B}=e,{nTriggerFormBlur:ae}=v;B&&A(B,t),ae()}function ee(t){const{onClear:i}=e;i&&A(i,t)}function te(){const{value:t}=j;if(!t){re();return}const{value:i}=o;if(i===null)e.validator||z(U());else{const{value:s}=X;D(s)}}function ne(){const{value:t}=H;if(!t){se();return}const{value:i}=o;if(i===null)e.validator||z(U());else{const{value:s}=X;D(-s)}}const pe=q,ve=J;function U(){if(e.validator)return null;const{value:t}=le,{value:i}=oe;return t!==null?Math.max(0,t):i!==null?Math.min(0,i):0}function me(t){ee(t),z(null)}function ge(t){var i,s,m;!((i=w.value)===null||i===void 0)&&i.$el.contains(t.target)&&t.preventDefault(),!((s=k.value)===null||s===void 0)&&s.$el.contains(t.target)&&t.preventDefault(),(m=f.value)===null||m===void 0||m.activate()}let I=null,M=null,Y=null;function se(){Y&&(window.clearTimeout(Y),Y=null),I&&(window.clearInterval(I),I=null)}function re(){Q&&(window.clearTimeout(Q),Q=null),M&&(window.clearInterval(M),M=null)}function be(){Y=window.setTimeout(()=>{I=window.setInterval(()=>{ne()},He)},ze),Ae("mouseup",document,()=>{window.setTimeout(se,0)})}let Q=null;function _e(){Q=window.setTimeout(()=>{M=window.setInterval(()=>{te()},He)},ze),Ae("mouseup",document,()=>{window.setTimeout(re,0)})}const at=()=>{M||te()},it=()=>{I||ne()};function lt(t){var i,s;if(t.code==="Enter"||t.code==="NumpadEnter"){if(t.target===((i=f.value)===null||i===void 0?void 0:i.wrapperElRef))return;D()!==!1&&((s=f.value)===null||s===void 0||s.deactivate())}else if(t.code==="ArrowUp"){if(e.keyboard.ArrowUp===!1)return;t.preventDefault(),D()!==!1&&te()}else if(t.code==="ArrowDown"){if(e.keyboard.ArrowDown===!1)return;t.preventDefault(),D()!==!1&&ne()}}function ot(t){$.value=t,e.updateValueOnInput&&D(0,!0,!0)}return ct(o,()=>{V()}),Object.assign(Object.assign({},{focus:()=>{var t;return(t=f.value)===null||t===void 0?void 0:t.focus()},blur:()=>{var t;return(t=f.value)===null||t===void 0?void 0:t.blur()}}),{inputInstRef:f,minusButtonInstRef:k,addButtonInstRef:w,mergedClsPrefix:a,mergedBordered:n,uncontrolledValue:l,mergedValue:o,mergedPlaceholder:fe,displayedValueInvalid:c,mergedSize:g,mergedDisabled:b,displayedValue:$,addable:j,minusable:H,mergedStatus:_,handleFocus:pe,handleBlur:ve,handleClear:me,handleMouseDown:ge,handleAddClick:at,handleMinusClick:it,handleAddMousedown:_e,handleMinusMousedown:be,handleKeyDown:lt,handleUpdateDisplayedValue:ot,mergedTheme:x,inputThemeOverrides:{paddingSmall:"0 8px 0 10px",paddingMedium:"0 8px 0 12px",paddingLarge:"0 8px 0 14px"},buttonThemeOverrides:ie(()=>{const{self:{iconColorDisabled:t}}=x.value,[i,s,m,B]=ht(t);return{textColorTextDisabled:`rgb(${i}, ${s}, ${m})`,opacityDisabled:`${B}`}})})},render(){const{mergedClsPrefix:e}=this;return r("div",{class:`${e}-input-number`},r(Je,{ref:"inputInstRef",status:this.mergedStatus,bordered:this.mergedBordered,loading:this.loading,value:this.displayedValue,onUpdateValue:this.handleUpdateDisplayedValue,theme:this.mergedTheme.peers.Input,themeOverrides:this.mergedTheme.peerOverrides.Input,builtinThemeOverrides:this.inputThemeOverrides,size:this.mergedSize,placeholder:this.mergedPlaceholder,disabled:this.mergedDisabled,readonly:this.readonly,textDecoration:this.displayedValueInvalid?"line-through":void 0,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onClear:this.handleClear,clearable:this.clearable,internalLoadingBeforeSuffix:!0},{prefix:()=>{var n,a;return(a=(n=this.$slots).prefix)===null||a===void 0?void 0:a.call(n)},suffix:()=>{var n,a;return this.showButton?[this.$slots.suffix&&r("span",{class:`${e}-input-number-suffix`},{default:this.$slots.suffix}),r(Me,{text:!0,disabled:!this.minusable||this.mergedDisabled||this.readonly,focusable:!1,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleMinusClick,onMousedown:this.handleMinusMousedown,ref:"minusButtonInstRef"},{default:()=>r(Pe,{clsPrefix:e,"aria-disabled":!0},{default:()=>r(It,null)})}),r(Me,{text:!0,disabled:!this.addable||this.mergedDisabled||this.readonly,focusable:!1,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleAddClick,onMousedown:this.handleAddMousedown,ref:"addButtonInstRef"},{default:()=>r(Pe,{clsPrefix:e},{default:()=>r(Bt,null)})})]:(a=(n=this.$slots).suffix)===null||a===void 0?void 0:a.call(n)}}))}}),Ut=Ne("switch",`
 height: var(--n-height);
 min-width: var(--n-width);
 vertical-align: middle;
 user-select: none;
 display: inline-flex;
 outline: none;
 justify-content: center;
 align-items: center;
`,[h("children-placeholder",`
 height: var(--n-rail-height);
 display: flex;
 flex-direction: column;
 overflow: hidden;
 pointer-events: none;
 visibility: hidden;
 `),h("rail-placeholder",`
 display: flex;
 flex-wrap: none;
 `),h("button-placeholder",`
 width: calc(1.75 * var(--n-rail-height));
 height: var(--n-rail-height);
 `),Ne("base-loading",`
 position: absolute;
 top: 50%;
 left: 50%;
 transform: translateX(-50%) translateY(-50%);
 font-size: calc(var(--n-button-width) - 4px);
 color: var(--n-loading-color);
 transition: color .3s var(--n-bezier);
 `,[Oe({originalTransform:"translateX(-50%) translateY(-50%)"})]),h("checked, unchecked",`
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
 box-sizing: border-box;
 position: absolute;
 white-space: nowrap;
 top: 0;
 bottom: 0;
 display: flex;
 align-items: center;
 line-height: 1;
 `),h("checked",`
 right: 0;
 padding-right: calc(1.25 * var(--n-rail-height) - var(--n-offset));
 `),h("unchecked",`
 left: 0;
 justify-content: flex-end;
 padding-left: calc(1.25 * var(--n-rail-height) - var(--n-offset));
 `),ue("&:focus",[h("rail",`
 box-shadow: var(--n-box-shadow-focus);
 `)]),F("round",[h("rail",{borderRadius:"calc(var(--n-rail-height) / 2)"},[h("button",{borderRadius:"calc(var(--n-button-height) / 2)"})])]),Ee("disabled",[Ee("icon",[F("pressed",[h("rail",[h("button",{maxWidth:"var(--n-button-width-pressed)"})])]),h("rail",[ue("&:active",[h("button",{maxWidth:"var(--n-button-width-pressed)"})])]),F("active",[F("pressed",[h("rail",[h("button",{left:"calc(100% - var(--n-offset) - var(--n-button-width-pressed))"})])]),h("rail",[ue("&:active",[h("button",{left:"calc(100% - var(--n-offset) - var(--n-button-width-pressed))"})])])])])]),F("active",[h("rail",[h("button",{left:"calc(100% - (var(--n-rail-height) + var(--n-button-width)) / 2)"})])]),h("rail",`
 overflow: hidden;
 height: var(--n-rail-height);
 min-width: var(--n-rail-width);
 border-radius: var(--n-rail-border-radius);
 cursor: pointer;
 position: relative;
 transition:
 background .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
 background-color: var(--n-rail-color);
 `,[h("button-icon",`
 color: var(--n-icon-color);
 transition: color .3s var(--n-bezier);
 font-size: calc(var(--n-button-height) - 4px);
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 display: flex;
 justify-content: center;
 align-items: center;
 line-height: 1;
 `,[Oe()]),h("button",`
 align-items: center; 
 top: var(--n-offset);
 left: var(--n-offset);
 height: var(--n-button-width);
 width: var(--n-button-width-pressed);
 max-width: var(--n-button-width);
 border-radius: var(--n-button-border-radius);
 background-color: var(--n-button-color);
 box-shadow: var(--n-button-box-shadow);
 box-sizing: border-box;
 cursor: inherit;
 content: "";
 position: absolute;
 transition:
 background-color .3s var(--n-bezier),
 left .3s var(--n-bezier),
 opacity .3s var(--n-bezier),
 max-width .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
 `)]),F("active",[h("rail","background-color: var(--n-rail-color-active);")]),F("disabled",[h("rail",`
 cursor: not-allowed;
 opacity: .5;
 `)]),F("loading",[h("rail",`
 pointer-events: none;
 `)])]);const Ft=Object.assign(Object.assign({},ce.props),{size:{type:String,default:"medium"},value:{type:[String,Number,Boolean],default:void 0},loading:Boolean,defaultValue:{type:[String,Number,Boolean],default:!1},disabled:{type:Boolean,default:void 0},round:{type:Boolean,default:!0},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],checkedValue:{type:[String,Number,Boolean],default:!0},uncheckedValue:{type:[String,Number,Boolean],default:!1},railStyle:Function,onChange:[Function,Array]});var Lt=O({name:"Switch",props:Ft,setup(e){const{mergedClsPrefixRef:n,inlineThemeDisabled:a}=je(e),x=ce("Switch","-switch",Ut,gt,e,n),u=We(e),{mergedSizeRef:v,mergedDisabledRef:g}=u,b=L(e.defaultValue),_=Ke(e,"value"),f=Ze(_,b),k=ie(()=>f.value===e.checkedValue),w=L(!1),l=L(!1),p=ie(()=>{const{railStyle:c}=e;if(!!c)return c({focused:l.value,checked:k.value})});function o(c){const{"onUpdate:value":H,onChange:j,onUpdateValue:q}=e,{nTriggerFormInput:J,nTriggerFormChange:ee}=u;H&&A(H,c),q&&A(q,c),j&&A(j,c),b.value=c,J(),ee()}function $(){const{nTriggerFormFocus:c}=u;c()}function he(){const{nTriggerFormBlur:c}=u;c()}function fe(){e.loading||g.value||(f.value!==e.checkedValue?o(e.checkedValue):o(e.uncheckedValue))}function X(){l.value=!0,$()}function le(){l.value=!1,he(),w.value=!1}function oe(c){e.loading||g.value||c.code==="Space"&&(f.value!==e.checkedValue?o(e.checkedValue):o(e.uncheckedValue),w.value=!1)}function z(c){e.loading||g.value||c.code==="Space"&&(c.preventDefault(),w.value=!0)}const D=ie(()=>{const{value:c}=v,{self:{opacityDisabled:H,railColor:j,railColorActive:q,buttonBoxShadow:J,buttonColor:ee,boxShadowFocus:te,loadingColor:ne,textColor:pe,iconColor:ve,[K("buttonHeight",c)]:U,[K("buttonWidth",c)]:me,[K("buttonWidthPressed",c)]:ge,[K("railHeight",c)]:I,[K("railWidth",c)]:M,[K("railBorderRadius",c)]:Y,[K("buttonBorderRadius",c)]:se},common:{cubicBezierEaseInOut:re}}=x.value,be=$e((P(I)-P(U))/2),Q=$e(Math.max(P(I),P(U))),_e=P(I)>P(U)?M:$e(P(M)+P(U)-P(I));return{"--n-bezier":re,"--n-button-border-radius":se,"--n-button-box-shadow":J,"--n-button-color":ee,"--n-button-width":me,"--n-button-width-pressed":ge,"--n-button-height":U,"--n-height":Q,"--n-offset":be,"--n-opacity-disabled":H,"--n-rail-border-radius":Y,"--n-rail-color":j,"--n-rail-color-active":q,"--n-rail-height":I,"--n-rail-width":M,"--n-width":_e,"--n-box-shadow-focus":te,"--n-loading-color":ne,"--n-text-color":pe,"--n-icon-color":ve}}),V=a?pt("switch",ie(()=>v.value[0]),D,e):void 0;return{handleClick:fe,handleBlur:le,handleFocus:X,handleKeyup:oe,handleKeydown:z,mergedRailStyle:p,pressed:w,mergedClsPrefix:n,mergedValue:f,checked:k,mergedDisabled:g,cssVars:a?void 0:D,themeClass:V==null?void 0:V.themeClass,onRender:V==null?void 0:V.onRender}},render(){const{mergedClsPrefix:e,mergedDisabled:n,checked:a,mergedRailStyle:x,onRender:u,$slots:v}=this;u==null||u();const{checked:g,unchecked:b,icon:_,"checked-icon":f,"unchecked-icon":k}=v,w=!(ke(_)&&ke(f)&&ke(k));return r("div",{role:"switch","aria-checked":a,class:[`${e}-switch`,this.themeClass,w&&`${e}-switch--icon`,a&&`${e}-switch--active`,n&&`${e}-switch--disabled`,this.round&&`${e}-switch--round`,this.loading&&`${e}-switch--loading`,this.pressed&&`${e}-switch--pressed`],tabindex:this.mergedDisabled?void 0:0,style:this.cssVars,onClick:this.handleClick,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyup:this.handleKeyup,onKeydown:this.handleKeydown},r("div",{class:`${e}-switch__rail`,"aria-hidden":"true",style:x},G(g,l=>G(b,p=>l||p?r("div",{"aria-hidden":!0,class:`${e}-switch__children-placeholder`},r("div",{class:`${e}-switch__rail-placeholder`},r("div",{class:`${e}-switch__button-placeholder`}),l),r("div",{class:`${e}-switch__rail-placeholder`},r("div",{class:`${e}-switch__button-placeholder`}),p)):null)),r("div",{class:`${e}-switch__button`},G(_,l=>G(f,p=>G(k,o=>r(vt,null,{default:()=>this.loading?r(mt,{key:"loading",clsPrefix:e,strokeWidth:20}):this.checked&&(p||l)?r("div",{class:`${e}-switch__button-icon`,key:p?"checked-icon":"icon"},p||l):!this.checked&&(o||l)?r("div",{class:`${e}-switch__button-icon`,key:o?"unchecked-icon":"icon"},o||l):null})))),G(g,l=>l&&r("div",{key:"checked",class:`${e}-switch__checked`},l)),G(b,l=>l&&r("div",{key:"unchecked",class:`${e}-switch__unchecked`},l)))))}});const zt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Ht=y("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M256 112v288"},null,-1),jt=y("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M400 256H112"},null,-1),Wt=[Ht,jt];var et=O({name:"Add",render:function(n,a){return R(),S("svg",zt,Wt)}});const Kt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Gt=y("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M368 368L144 144"},null,-1),Xt=y("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M368 144L144 368"},null,-1),qt=[Gt,Xt];var tt=O({name:"CloseOutline",render:function(n,a){return R(),S("svg",Kt,qt)}});const Yt={class:"edit_places"},Qt={class:"places"},Zt={key:0,class:"editTravelTime"},Jt={key:0,class:"travelTimeInput"},en=y("div",{class:"travelTimeLabel"},"Travel time",-1),tn=E("minutes"),nn=E("Set travel time"),an=y("br",null,null,-1),ln=E("Delete this place"),on=E("Add another place");function sn(e,n,a,x,u,v){const g=C("n-divider"),b=C("n-input-number"),_=C("n-button"),f=C("n-input"),k=C("close-outline"),w=C("n-icon"),l=C("add");return R(),S("div",Yt,[y("ul",Qt,[(R(!0),S(Ge,null,Xe(e.propPlaces,(p,o)=>(R(),S("li",{class:"place",key:o},[o>0?(R(),S("div",Zt,[d(g,{class:"editPlaceDivider"}),p.travelTime!==void 0?(R(),S("div",Jt,[en,d(b,{placeholder:"Travel time (in minutes)",type:"text",min:0,value:p.travelTime.timeInMinutes,"onUpdate:value":$=>p.travelTime.timeInMinutes=$},{suffix:T(()=>[tn]),_:2},1032,["value","onUpdate:value"])])):(R(),Re(_,{key:1,class:"setTravelTime",type:"default",onClick:$=>e.setTravelTime(o)},{default:T(()=>[nn]),_:2},1032,["onClick"])),d(g,{class:"editPlaceDivider"})])):qe("",!0),y("div",{class:Ye(["editPlace","place"+o])},[d(f,{class:"inputPlaceLabel",value:p.place.label,"onUpdate:value":$=>p.place.label=$,type:"text",placeholder:"Place Name"+(o!==0?"":" (eg. Golden Gate Bridge)")},null,8,["value","onUpdate:value","placeholder"]),d(f,{class:"inputPlaceLink",value:p.place.URL,"onUpdate:value":$=>p.place.URL=$,type:"text",placeholder:"Link"+(o!==0?"":" (eg. Google Map link)")},null,8,["value","onUpdate:value","placeholder"]),an,d(f,{class:"inputPlaceDesc",value:p.place.description,"onUpdate:value":$=>p.place.description=$,type:"textarea",placeholder:o!==0?"Description":"Elaborate more about why you include this place in the trip!",rows:3},null,8,["value","onUpdate:value","placeholder"]),d(_,{class:"removePlace wide_button",type:"error",secondary:"",onClick:$=>e.removePlace(o)},{default:T(()=>[d(w,null,{default:T(()=>[d(k)]),_:1}),ln]),_:2},1032,["onClick"])],2)]))),128))]),d(g,{class:"editPlaceDivider"}),d(_,{class:"addPlace wide_button",onClick:e.pushPlace},{default:T(()=>[d(w,null,{default:T(()=>[d(l)]),_:1}),on]),_:1},8,["onClick"])])}const rn=O({name:"CEditPlaces",components:{Add:et,CloseOutline:tt,NButton:Ve,NDivider:dt,NIcon:Qe,NInput:Je,NInputNumber:Et},model:{props:{propPlaces:Array()},emits:["update:propPlaces"]},props:{propPlaces:{type:Array,default:()=>[],validator:function(e){return Array.isArray(e)?(e.forEach(n=>{if(!(n instanceof Ie))return!1}),!0):!1}}},methods:{pushPlace(){this.$props.propPlaces.push(new Ie)},removePlace(e){this.$props.propPlaces.splice(e,1)},setTravelTime(e){const n=new ut;n.toPlaceIndex=e,this.$props.propPlaces[e].travelTime=n}}});var nt=Be(rn,[["render",sn]]);const dn={class:"edit_days narrow_content"},un={class:"editDayCardContent"},cn={class:"editDayTitle"},hn=E("Delete this day"),fn=E("Add another day");function pn(e,n,a,x,u,v){const g=C("close-outline"),b=C("n-icon"),_=C("n-button"),f=C("CEditPlaces"),k=C("n-card"),w=C("add");return R(),S("div",dn,[(R(!0),S(Ge,null,Xe(e.days,(l,p)=>(R(),Re(k,{class:Ye(["editDay","day"+l.dayOf]),key:l.dayOf,hoverable:"","content-style":"padding: 0"},{default:T(()=>[y("div",un,[y("div",cn,[y("b",null,"Day "+bt(l.dayOf),1),d(_,{class:"removeDay right_button",secondary:"",type:"error",onClick:o=>e.removeDay(p)},{default:T(()=>[d(b,null,{default:T(()=>[d(g)]),_:1}),hn]),_:2},1032,["onClick"])]),d(f,{class:"editPlaces",ref_for:!0,ref:"places"+p,propPlaces:l.propPlaces,"onUpdate:propPlaces":o=>l.propPlaces=o},null,8,["propPlaces","onUpdate:propPlaces"])])]),_:2},1032,["class"]))),128)),d(_,{class:"addDay right_button",onClick:n[0]||(n[0]=l=>e.pushDay())},{default:T(()=>[d(b,null,{default:T(()=>[d(w)]),_:1}),fn]),_:1})])}const vn=O({components:{Add:et,CEditPlaces:nt,CloseOutline:tt,NButton:Ve,NCard:_t,NIcon:Qe},props:{givenDays:{type:Array,required:!0}},data:()=>({days:[]}),beforeMount(){this.$data.days=this.$props.givenDays.slice(0).map(e=>new Se(e))},methods:{pushDay(){let e=new Se(new yt({places:[{}]}));e.dayOf=this.$data.days.length+1,this.$data.days.push(e)},removeDay(e){this.$data.days.splice(e,1);let n={};for(let u of this.$data.days)n[u.dayOf]=u;const a=this.$data.days.length;this.$data.days=[];let x=0;for(let u=0;u<a;u++){let v=n[u+x];for(;v==null&&u+x<a+5;)x++,v=n[u+x];v.dayOf=u+1,this.$data.days.push(v)}}}});var mn=Be(vn,[["render",pn],["__scopeId","data-v-3103462c"]]);class gn{constructor(n,a){de(this,"type");de(this,"label");de(this,"value");this.type=n,this.label=this.getLabel(),this.value=a}static getAllTypes(){return["name","description"]}getLabel(){switch(this.type){case"name":return"Name";case"description":return"Description";default:return"unknown_type"}}}const bn={class:"edit_trip"},_n={class:"edit_form"},yn={class:"narrow_content"},wn={class:"editTripPrivacy"},Cn=y("span",{class:"editLabel"},"Private:",-1),$n={class:"editInput"},kn={class:"editCity"},xn=y("span",{class:"editLabel"},"Cities:",-1),Tn={class:"confirmationButtons narrow_content"},Dn=E("Save"),Nn=E("Cancel"),Rn=E("Delete");function Vn(e,n,a,x,u,v){const g=C("CEditItem"),b=C("n-switch"),_=C("n-select"),f=C("CEditDays"),k=C("n-button");return R(),S("div",bn,[y("form",_n,[y("div",yn,[d(g,{className:"editTripName",label:"Name",ref:"name",val:e.trip.details.name.valueOf()},null,8,["val"]),d(g,{className:"editTripDescription",label:"Description",ref:"description",type:"textarea",val:e.trip.details.description.valueOf(),"val-max-count":e.descriptionMaxCharCount,"row-min-count":e.descriptionRowMinCount},null,8,["val","val-max-count","row-min-count"]),y("div",wn,[Cn,y("div",$n,[d(b,{class:"editPrivacyToggle",value:e.private,"onUpdate:value":n[0]||(n[0]=w=>e.private=w)},null,8,["value"])])]),y("div",kn,[xn,d(_,{class:"editInput",value:e.cities,"onUpdate:value":n[1]||(n[1]=w=>e.cities=w),options:e.possibleCities,filterable:"",multiple:"",placeholder:""},null,8,["value","options"])])]),d(f,{ref:"days",givenDays:e.trip.details.days},null,8,["givenDays"]),y("div",Tn,[d(k,{class:"saveEditTrip left_col",type:"info",onClick:e.save,loading:e.saving},{default:T(()=>[Dn]),_:1},8,["onClick","loading"]),d(k,{class:"cancelEditTrip right_col",type:"default",onClick:e.cancel},{default:T(()=>[Nn]),_:1},8,["onClick"]),e.isNew?qe("",!0):(R(),Re(k,{key:0,class:"deleteTrip right_col",onClick:e.confirmDelete,type:"error",loading:e.deleting},{default:T(()=>[Rn]),_:1},8,["onClick","loading"]))])])])}const Bn=3,In=O({components:{NButton:Ve,NSelect:Vt,NSwitch:Lt,CEditDays:mn,CEditItem:Nt,CEditPlaces:nt},props:{trip:{type:wt,required:!0},isNew:{type:Boolean,required:!0}},emits:{save(e){return e.ID!==-1},cancel(){return!0}},data:()=>({cities:[],possibleCities:[],private:!1,saving:!1,deleting:!1}),computed:{descriptionMaxCharCount(){return xe},descriptionRowMinCount(){return Bn}},beforeMount(){Le.init(),this.update()},mounted(){Z.get(Z.get(this,"name"),"input").focus()},methods:{cancel(){var e;Z.get(this,"days").$data.days=((e=this.$props.trip.details.days)!=null?e:[]).slice(0),this.$emit("cancel")},save(){let e=new Ct;if(this.$data.cities.length<1){this.showAlert("Cities cannot be empty");return}this.$data.saving=!0,e.cities=Ce.stringToCities(this.$data.cities.join(","));const n=Z.getVal(this,"name"),a=Z.getVal(this,"description").split(`
`).join(" ");if(!this.checkValidNameDescription(n,a)){this.$data.saving=!1;return}e.name=n,e.description=a,e.days=[];const u=Z.get(this,"days");let v=0;for(const g in u.days){const b=u.days[g].toDay(),_=this.filterPlaces(b.places);if(_===null){this.$alert("We currently only support links to limited websites including OpenStreetMap, Google Map, Bing Maps and Yelp.","Invalid Link",{confirmButtonText:"OK"}),this.$data.saving=!1;return}_.length>0?(b.places=_,b.dayOf=b.dayOf-v,e.days.push(b)):v++}e.private=this.$data.private,e.ID=this.$props.trip.ID,this.$emit("save",e),this.$data.saving=!1},filterPlaces(e){let n=[];for(let a of e)if(a.label=a.label.trim(),a.URL=a.URL.trim(),a.label!=="")if(a.URL===""||this.filterPlace(a))a.description=a.description.split(`
`).join(" "),n.push(a);else return null;return n},filterPlace(e){const n=["https://goo.gl/maps/","https://google.com/maps/","https://www.google.com/maps/","https://maps.google.com/","https://www.openstreetmap.org/way/","https://www.bing.com/maps?","https://www.yelp.com/biz/"];for(const a of n)if(e.URL.startsWith(a))return!0;return!1},confirmDelete(){Le.dialogWarning({title:"Delete trip",content:"Are you sure you want to delete this trip? THIS PROCESS IS IRREVERSIBLE.",positiveText:"Confirm",negativeText:"Cancel",onPositiveClick:async()=>{await this.del()},onNegativeClick:async()=>{}})},async del(){this.$data.deleting=!0;let e=Boolean(await $t.genDELETE("v2/trip/"+this.$props.trip.ID,kt.stringify(this.$props.trip)));e||(e=(await Ue.genTrip(this.$props.trip.ID.valueOf())).ID===-1),this.$data.deleting=!1,this.$notify(Ue.notifConfig("Trip Deletion",e?"Trip is successfully deleted!":"Trip deletion attempt failed.",e?"success":"error")),e&&xt.genRedirectTo(Tt.Landing)},tripToItem(e){return new gn(e,this.$props.trip[e])},update(){this.$data.possibleCities=Ce.sortedCityOptions(),this.$data.cities=Ce.stringToCityStringArray(this.$props.trip.details.cities.join(",")),this.$data.private=this.$props.trip.details.private.valueOf()},checkValidNameDescription(e,n){return!e||e.length<Rt?(this.showAlert("Trip name is too short."),!1):e.length>Fe?(this.showAlert(`Trip name cannot be longer than ${Fe}.`),!1):!n||n.length>xe?(this.showAlert(`Trip description cannot be longer than ${xe}.`),!1):!0},showAlert(e){this.$alert(e,"",{confirmButtonText:"OK"})}}});var zn=Be(In,[["render",Vn]]);export{zn as C};
