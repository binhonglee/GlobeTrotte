import{b1 as f,b2 as d}from"./index.208a3769.js";class h{static isPWA(){switch("production"){case"production":return window.matchMedia("(display-mode: standalone)").matches;case"development":return!0}return!0}}class p{constructor(e){this.order=e.order,this.key=e.key,this.obj=e.obj}static paramsToRecord(e,o,s){return{order:e,key:o,obj:s}}getOrder(){return this.order}getKey(){return this.key}incrementOrder(){return this.order++,this.order}getObj(){const e=d(this.obj).replaceAll("\\'","'");return this.getObjImpl(e)}}function u(t,e){if(e===null)return null;try{const o=JSON.parse(e),s=[];for(const n of o)s.push(new t(n));return s}catch{return null}}class O{constructor(){this.fromStorage=!1,this.completed=null,this.promise=null}}class b{getStorage(){return localStorage.getItem(this.storage)}setStorage(e){localStorage.setItem(this.storage,JSON.stringify(e))}async genObjImpl(e,o,s){const n=new e;if(h.isPWA()){const r=u(o,this.getStorage());if(r!==null){for(const a of r)if(a.getKey()===s)return n.completed=a.getObj(),n.promise=this.genFetch(s),n.fromStorage=!0,n}}return n.completed=await this.genFetch(s),n.promise=null,n}storeObj(e,o,s,n){let r;try{r=u(o,this.getStorage())}catch{r=null}let a=0;if(r!==null){const l=[];for(const[i,c]of r.entries())c.getKey()===s?l.push(i):c.getOrder()>a&&(a=c.getOrder(),l.push(i)),c.incrementOrder();for(const i of l)r.length===1&&(r=[]),r.splice(i,1)}else r=[];r.push(new o(p.paramsToRecord(a,s,f(n)))),this.setStorage(r)}}var g=(t=>(t.TRIP="trip",t.USER="user",t.USERNAME="username",t))(g||{});function v(t){return t.replaceAll('"','\\"').replaceAll("	","").replaceAll(`
`,"\\n")}function j(t,e){return t.ID.valueOf()===e.ID.valueOf()&&t.details.bio.valueOf()===e.details.bio.valueOf()&&t.details.link.valueOf()===e.details.link.valueOf()&&t.details.name.valueOf()===e.details.name.valueOf()&&t.details.username.valueOf()===e.details.username.valueOf()}export{b as C,O as F,h as P,g as a,p as b,v as p,j as s};
