import{b1 as f,b2 as d}from"./index.73a5a8ff.js";class h{static isPWA(){switch("production"){case"production":return window.matchMedia("(display-mode: standalone)").matches;case"development":return!0}return!0}}class g{constructor(e){this.order=e.order,this.key=e.key,this.obj=e.obj}static paramsToRecord(e,n,s){return{order:e,key:n,obj:s}}getOrder(){return this.order}getKey(){return this.key}incrementOrder(){return this.order++,this.order}getObj(){const e=d(this.obj).replaceAll("\\'","'");return this.getObjImpl(e)}}function u(t,e){if(e===null)return null;try{const n=JSON.parse(e),s=[];for(const o of n)s.push(new t(o));return s}catch{return null}}class O{constructor(){this.fromStorage=!1,this.completed=null,this.promise=null}}class b{getStorage(){return localStorage.getItem(this.storage)}setStorage(e){localStorage.setItem(this.storage,JSON.stringify(e))}async genObjImpl(e,n,s){const o=new e;if(h.isPWA()){const r=u(n,this.getStorage());if(console.log(r),r!==null){for(const l of r)if(console.log(l),l.getKey()===s)return o.completed=l.getObj(),o.promise=this.genFetch(s),o.fromStorage=!0,o}}return o.completed=await this.genFetch(s),o.promise=null,o}storeObj(e,n,s,o){let r;try{r=u(n,this.getStorage())}catch{r=null}let l=0;if(r!==null){const a=[];for(const[i,c]of r.entries())c.getKey()===s?a.push(i):c.getOrder()>l&&(l=c.getOrder(),a.push(i)),c.incrementOrder();for(const i of a)r.length===1&&(r=[]),r.splice(i,1)}else r=[];r.push(new n(g.paramsToRecord(l,s,f(o)))),this.setStorage(r)}}var p=(t=>(t.TRIP="trip",t.USER="user",t.USERNAME="username",t))(p||{});function v(t){return t.replaceAll('"','\\"').replaceAll("	","").replaceAll(`
`,"\\n")}function j(t,e){return t.ID.valueOf()===e.ID.valueOf()&&t.details.bio.valueOf()===e.details.bio.valueOf()&&t.details.link.valueOf()===e.details.link.valueOf()&&t.details.name.valueOf()===e.details.name.valueOf()&&t.details.username.valueOf()===e.details.username.valueOf()}export{b as C,O as F,h as P,p as a,g as b,v as p,j as s};
