import{a as g}from"./CPlaces.4eb02410.js";import{C as w}from"./CTripPreviewCard.1ea667c7.js";import{U as C,G as k,R as T,a as $,_ as E}from"./index.c91018d5.js";import{T as B}from"./TripUtil.cf3da4e6.js";import{r as o,o as t,d as s,i as u,z as c,g as r,f as _,w as a,h as i,e as n,F as N,s as P,m as U,n as b,j as I,I as j,t as A,B as V}from"./vendor.ac364b71.js";const L=e=>(U("data-v-3dd32dbd"),e=e(),b(),e),D={class:"view_user"},R={class:"userInfo narrow_content"},S={key:0,class:"userName"},G={key:1,class:"userBio"},O={key:3,class:"userInfoButtonGroups"},z=i("Logout"),F=i("Edit"),M={class:"viewUserTrips"},q=L(()=>u("h2",null,"Trips",-1)),H={key:0,class:"createTripAlertDiv"},J=i("Seems like you have not shared any of your own trips."),K=i("Create New Trip");function Q(e,l,d,X,Y,Z){const m=o("CExternalLink"),p=o("n-button"),f=o("n-divider"),h=o("CTripPreviewCard"),y=o("n-alert");return t(),s("div",D,[u("div",R,[e.showName?(t(),s("h2",S,c(e.user.details.name),1)):r("",!0),e.user.details.bio!==""?(t(),s("p",G,c(e.user.details.bio),1)):r("",!0),e.user.details.link!==""?(t(),_(m,{key:2,underline:"hover",url:e.user.details.link.valueOf()},{default:a(()=>[i(c(e.user.details.link),1)]),_:1},8,["url"])):r("",!0),e.self?(t(),s("div",O,[n(p,{class:"myAccountLogout",type:"error",onClick:e.logout},{default:a(()=>[z]),_:1},8,["onClick"]),n(p,{class:"myAccountEdit",type:"default",ref:"edit",onClick:e.toggleEdit},{default:a(()=>[F]),_:1},8,["onClick"])])):r("",!0)]),n(f,{class:"viewUserDivider"}),u("div",M,[q,(t(!0),s(N,null,P(e.trips,v=>(t(),_(h,{trip:v,wide:!0},null,8,["trip"]))),256)),e.self&&e.tripsEmpty?(t(),s("div",H,[n(y,{class:"createTripAlert",type:"default","show-icon":!1},{default:a(()=>[J,e.confirmed?(t(),_(p,{key:0,class:"createTripButton",type:"info",onClick:e.newTrip,size:"large"},{default:a(()=>[K]),_:1},8,["onClick"])):r("",!0)]),_:1})])):r("",!0)])])}const W=I({name:"CViewUser",components:{CExternalLink:g,CTripPreviewCard:w,NAlert:j,NButton:A,NDivider:V},props:{user:{type:C,required:!0},showName:{type:Boolean,default:!0},self:{type:Boolean,default:!1},confirmed:{type:Boolean,default:!1}},emits:{logout(){return!0},toggleEdit(){return!0}},data:()=>({trips:[],lastPopulated:[],tripsEmpty:!0}),async beforeMount(){await this.genPopulateTrips()},async beforeUpdate(){await this.genPopulateTrips()},methods:{compareArray(e,l){if(e.length!==l.length)return!1;for(let d in e)if(e[d]!==l[d])return!1;return!0},async genPopulateTrips(){this.compareArray(this.$data.lastPopulated,this.$props.user.trips)||(this.$data.trips=await Promise.all(this.$props.user.trips.map(async e=>await k.genTrip(e.ID.valueOf()))),B.sortTripsMostRecentlyUpdated(this.$data.trips),this.$data.tripsEmpty=this.$data.trips.length<=0,this.$data.lastPopulated=this.$props.user.trips)},logout(){this.$emit("logout")},toggleEdit(){this.$emit("toggleEdit")},async newTrip(){await T.genRedirectTo($.trip_New)}}});var oe=E(W,[["render",Q],["__scopeId","data-v-3dd32dbd"]]);export{oe as C};
