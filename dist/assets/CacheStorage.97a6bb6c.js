class d{static isPWA(){switch("production"){case"production":return window.matchMedia("(display-mode: standalone)").matches;case"development":return!0}return!0}}class g{constructor(e){this.order=e.order,this.key=e.key,this.obj=e.obj}static paramsToRecord(e,n,r){return{order:e,key:n,obj:r}}getOrder(){return this.order}getKey(){return this.key}incrementOrder(){return this.order++,this.order}}function h(o,e){if(e===null)return null;try{const n=JSON.parse(e),r=[];for(const s of n)r.push(new o(s));return r}catch{return null}}class m{constructor(){this.fromStorage=!1,this.completed=null,this.promise=null}}class p{getStorage(){return localStorage.getItem(this.storage)}setStorage(e){localStorage.setItem(this.storage,JSON.stringify(e))}async genObjImpl(e,n,r){const s=new e;if(d.isPWA()){const t=h(n,this.getStorage());if(t!==null){for(const i of t)if(i.getKey()===r)return s.completed=i.getObj(),s.promise=this.genFetch(r),s.fromStorage=!0,s}}return s.completed=await this.genFetch(r),s.promise=null,s}storeObj(e,n,r,s){let t;try{t=h(n,this.getStorage())}catch{t=null}let i=0;if(t!==null){let a=0,c=!1;for(const[u,l]of t.entries()){if(l.getKey()===r){a=u,c=!0;break}l.getOrder()>i&&(i=l.getOrder(),a=u),l.incrementOrder()}(t.length>this.storeCount||c)&&t.splice(a,1)}else t=[];t.push(new n(g.paramsToRecord(i,s,r))),this.setStorage(t)}}var f=(o=>(o.TRIP="trip",o.USER="user",o.USERNAME="username",o))(f||{});export{g as C,m as F,d as P,p as a,f as b};
