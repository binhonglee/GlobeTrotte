import{a as g}from"./CPlaces.2c2e8c9b.js";import{C}from"./CTripPreviewCard.fc0e3c00.js";import{U as y,G as w,_ as k}from"./index.b45d7991.js";import{r as o,o as t,d as s,i as c,y as n,g as r,f as _,w as l,h as d,e as u,F as P,s as $,m as T,n as b,j as B,t as E,B as N}from"./vendor.b76afd09.js";const I=e=>(T("data-v-e04795a8"),e=e(),b(),e),U={class:"view_user"},j={class:"userInfo narrow_content"},L={key:0,class:"userName"},V={key:1,class:"userBio"},A={key:3,class:"userInfoButtonGroups"},D=d("Logout"),S=d("Edit"),G={key:0,class:"viewUserTrips"},O=I(()=>c("h2",null,"Trips",-1));function F(e,a,i,M,z,H){const m=o("CExternalLink"),p=o("n-button"),h=o("n-divider"),f=o("CTripPreviewCard");return t(),s("div",U,[c("div",j,[e.showName?(t(),s("h2",L,n(e.user.details.name),1)):r("",!0),e.user.details.bio!==""?(t(),s("p",V,n(e.user.details.bio),1)):r("",!0),e.user.details.link!==""?(t(),_(m,{key:2,underline:"hover",url:e.user.details.link.valueOf()},{default:l(()=>[d(n(e.user.details.link),1)]),_:1},8,["url"])):r("",!0),e.self?(t(),s("div",A,[u(p,{class:"myAccountLogout",type:"error",onClick:e.logout},{default:l(()=>[D]),_:1},8,["onClick"]),u(p,{class:"myAccountEdit",tabindex:"0",type:"default",ref:"edit",onClick:e.toggleEdit},{default:l(()=>[S]),_:1},8,["onClick"])])):r("",!0)]),u(h,{class:"viewUserDivider"}),e.trips.length>0?(t(),s("div",G,[O,(t(!0),s(P,null,$(e.trips,v=>(t(),_(f,{trip:v,wide:!0},null,8,["trip"]))),256))])):r("",!0)])}const q=B({components:{CExternalLink:g,CTripPreviewCard:C,NButton:E,NDivider:N},props:{user:{type:y,required:!0},showName:{type:Boolean,default:!0},self:{type:Boolean,default:!1}},emits:{logout(){return!0},toggleEdit(){return!0}},data:()=>({trips:[],lastPopulated:[]}),async beforeMount(){await this.genPopulateTrips()},async beforeUpdate(){await this.genPopulateTrips()},methods:{compareArray(e,a){if(e.length!==a.length)return!1;for(let i in e)if(e[i]!==a[i])return!1;return!0},async genPopulateTrips(){this.compareArray(this.$data.lastPopulated,this.$props.user.trips)||(this.$data.trips=await Promise.all(this.$props.user.trips.map(async e=>await w.genTrip(e.ID.valueOf()))),this.$data.lastPopulated=this.$props.user.trips)},logout(){this.$emit("logout")},toggleEdit(){this.$emit("toggleEdit")}}});var W=k(q,[["render",F],["__scopeId","data-v-e04795a8"]]);export{W as C};
