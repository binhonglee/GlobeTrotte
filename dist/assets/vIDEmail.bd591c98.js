var u=Object.defineProperty;var c=(e,i,a)=>i in e?u(e,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[i]=a;var n=(e,i,a)=>(c(e,typeof i!="symbol"?i+"":i,a),a);import{aV as m,o as f,c as _,aO as g,e as o,p,b as h,_ as v,d as w,G as t,R as s,k as r,j as C,aW as E}from"./index.2ee84990.js";class ${constructor(i){n(this,"uuid","");n(this,"email","");n(this,"userid",0);i&&(this.uuid=i.uuid!==void 0&&i.uuid!==null?i.uuid:"",this.email=i.email!==void 0&&i.email!==null?i.email:"",this.userid=i.userid!==void 0&&i.userid!==null?i.userid:0)}toJsonKey(i){switch(i){case"uuid":return"uuid";case"email":return"email";case"userid":return"userid";default:return i}}}const d=e=>(p("data-v-0e0961c5"),e=e(),h(),e),I={class:"confirm_email_uuid"},R=d(()=>o("h1",null,"Email Confirmation",-1)),y={class:"emailConfirmationLoadingBox"},T=d(()=>o("p",null,"Confirming your email address...",-1));function D(e,i,a,x,B,U){const l=m("loading");return f(),_("div",I,[R,g(o("div",y,null,512),[[l,e.loading]]),T])}const S=w({data(){return{loading:!1}},async mounted(){this.$data.loading=!0;const e=await t.genCurrentUser();if(e.details.confirmed){this.$data.loading=!1,await s.genRedirectTo(r.Landing);return}const i=t.paramID();if(i===void 0){await s.genRedirectTo(r.unconfirmed_Email);return}const a=await C.genPOST("confirm/email",E.stringify(new $({uuid:i,email:e.details.email,userid:e.ID})));await t.genUpdateCurrentUser(),this.$data.loading=!1,a?(this.$notify(t.notifConfig("Email Confirmation","Your email is now confirmed!","success")),await s.genRedirectTo(r.Landing)):(this.$notify(t.notifConfig("Email Confirmation","Email confirmation failed.","error")),await s.genRedirectTo(r.unconfirmed_Email))}});var k=v(S,[["render",D],["__scopeId","data-v-0e0961c5"]]);export{k as default};
