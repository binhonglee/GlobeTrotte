import{a as v}from"./CPlaces.6e24ac6f.js";import{C as w}from"./CTripPreviewCard.7c1f2651.js";import{U as C,G as k,R as T,a as $,_ as E}from"./index.e48dfa1b.js";import{T as N}from"./TripUtil.cf3da4e6.js";import{r as o,o as t,d as s,i as _,D as u,g as r,f as c,w as a,h as i,e as n,F as B,y as P,t as U,v as b,j as A,M as I,z as V,G as D}from"./vendor.834a3fba.js";const L=e=>(U("data-v-2fdaa0ba"),e=e(),b(),e),R={class:"view_user"},S={class:"userInfo narrow_content"},G={key:0,class:"userName left_col"},M={key:1,class:"userBio"},O={key:3,class:"userInfoButtonGroups"},j=i("Logout"),z=i("Edit"),F={class:"viewUserTrips"},q=L(()=>_("h2",null,"Trips",-1)),H={key:0,class:"createTripAlertDiv"},J=i("Seems like you have not shared any of your own trips."),K=i("Create New Trip");function Q(e,l,p,X,Y,Z){const f=o("CExternalLink"),d=o("n-button"),h=o("n-divider"),m=o("CTripPreviewCard"),y=o("n-alert");return t(),s("div",R,[_("div",S,[e.showName?(t(),s("h2",G,u(e.user.details.name),1)):r("",!0),e.user.details.bio!==""?(t(),s("p",M,u(e.user.details.bio),1)):r("",!0),e.user.details.link!==""?(t(),c(f,{key:2,underline:"hover",url:e.user.details.link.valueOf()},{default:a(()=>[i(u(e.user.details.link),1)]),_:1},8,["url"])):r("",!0),e.self?(t(),s("div",O,[n(d,{class:"myAccountLogout left_col",type:"error",onClick:e.logout},{default:a(()=>[j]),_:1},8,["onClick"]),n(d,{class:"myAccountEdit right_col",type:"default",ref:"edit",onClick:e.toggleEdit},{default:a(()=>[z]),_:1},8,["onClick"])])):r("",!0)]),n(h,{class:"viewUserDivider"}),_("div",F,[q,(t(!0),s(B,null,P(e.trips,g=>(t(),c(m,{trip:g,wide:!0},null,8,["trip"]))),256)),e.self&&e.tripsEmpty?(t(),s("div",H,[n(y,{class:"createTripAlert",type:"default","show-icon":!1},{default:a(()=>[J,e.confirmed?(t(),c(d,{key:0,class:"createTripButton",type:"info",onClick:e.newTrip,size:"large"},{default:a(()=>[K]),_:1},8,["onClick"])):r("",!0)]),_:1})])):r("",!0)])])}const W=A({name:"CViewUser",components:{CExternalLink:v,CTripPreviewCard:w,NAlert:I,NButton:V,NDivider:D},props:{user:{type:C,required:!0},showName:{type:Boolean,default:!0},self:{type:Boolean,default:!1},confirmed:{type:Boolean,default:!1}},emits:{logout(){return!0},toggleEdit(){return!0}},data:()=>({trips:[],lastPopulated:[],tripsEmpty:!0}),async beforeMount(){await this.genPopulateTrips()},async beforeUpdate(){await this.genPopulateTrips()},methods:{compareArray(e,l){if(e.length!==l.length)return!1;for(let p in e)if(e[p]!==l[p])return!1;return!0},async genPopulateTrips(){this.compareArray(this.$data.lastPopulated,this.$props.user.trips)||(this.$data.trips=await Promise.all(this.$props.user.trips.map(async e=>await k.genTrip(e.ID.valueOf()))),N.sortTripsMostRecentlyUpdated(this.$data.trips),this.$data.tripsEmpty=this.$data.trips.length<=0,this.$data.lastPopulated=this.$props.user.trips)},logout(){this.$emit("logout")},toggleEdit(){this.$emit("toggleEdit")},async newTrip(){await T.genRedirectTo($.trip_New)}}});var oe=E(W,[["render",Q],["__scopeId","data-v-2fdaa0ba"]]);export{oe as C};
