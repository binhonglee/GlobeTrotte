import{a as g}from"./CPlaces.2f9bc155.js";import{C as w}from"./CTripPreviewCard.6a6e7416.js";import{U as C,G as k,R as T,a as $,_ as E}from"./index.265373cb.js";import{r as o,o as t,d as s,i as u,z as c,g as r,f as _,w as a,h as i,e as n,F as B,s as N,m as P,n as b,j as I,I as U,t as A,B as V}from"./vendor.6a882937.js";const j=e=>(P("data-v-759d3dda"),e=e(),b(),e),L={class:"view_user"},D={class:"userInfo narrow_content"},S={key:0,class:"userName"},R={key:1,class:"userBio"},G={key:3,class:"userInfoButtonGroups"},O=i("Logout"),z=i("Edit"),F={class:"viewUserTrips"},q=j(()=>u("h2",null,"Trips",-1)),M={key:0,class:"createTripAlertDiv"},H=i("Seems like you have not shared any of your own trips."),J=i("Create New Trip");function K(e,l,d,W,X,Y){const f=o("CExternalLink"),p=o("n-button"),m=o("n-divider"),h=o("CTripPreviewCard"),y=o("n-alert");return t(),s("div",L,[u("div",D,[e.showName?(t(),s("h2",S,c(e.user.details.name),1)):r("",!0),e.user.details.bio!==""?(t(),s("p",R,c(e.user.details.bio),1)):r("",!0),e.user.details.link!==""?(t(),_(f,{key:2,underline:"hover",url:e.user.details.link.valueOf()},{default:a(()=>[i(c(e.user.details.link),1)]),_:1},8,["url"])):r("",!0),e.self?(t(),s("div",G,[n(p,{class:"myAccountLogout",type:"error",onClick:e.logout},{default:a(()=>[O]),_:1},8,["onClick"]),n(p,{class:"myAccountEdit",type:"default",ref:"edit",onClick:e.toggleEdit},{default:a(()=>[z]),_:1},8,["onClick"])])):r("",!0)]),n(m,{class:"viewUserDivider"}),u("div",F,[q,(t(!0),s(B,null,N(e.trips,v=>(t(),_(h,{trip:v,wide:!0},null,8,["trip"]))),256)),e.self&&e.tripsEmpty?(t(),s("div",M,[n(y,{class:"createTripAlert",type:"default","show-icon":!1},{default:a(()=>[H,e.confirmed?(t(),_(p,{key:0,class:"createTripButton",type:"info",onClick:e.newTrip,size:"large"},{default:a(()=>[J]),_:1},8,["onClick"])):r("",!0)]),_:1})])):r("",!0)])])}const Q=I({name:"CViewUser",components:{CExternalLink:g,CTripPreviewCard:w,NAlert:U,NButton:A,NDivider:V},props:{user:{type:C,required:!0},showName:{type:Boolean,default:!0},self:{type:Boolean,default:!1},confirmed:{type:Boolean,default:!1}},emits:{logout(){return!0},toggleEdit(){return!0}},data:()=>({trips:[],lastPopulated:[],tripsEmpty:!0}),async beforeMount(){await this.genPopulateTrips()},async beforeUpdate(){await this.genPopulateTrips()},methods:{compareArray(e,l){if(e.length!==l.length)return!1;for(let d in e)if(e[d]!==l[d])return!1;return!0},async genPopulateTrips(){this.compareArray(this.$data.lastPopulated,this.$props.user.trips)||(this.$data.trips=await Promise.all(this.$props.user.trips.map(async e=>await k.genTrip(e.ID.valueOf()))),this.$data.tripsEmpty=this.$data.trips.length<=0,this.$data.lastPopulated=this.$props.user.trips)},logout(){this.$emit("logout")},toggleEdit(){this.$emit("toggleEdit")},async newTrip(){await T.genRedirectTo($.trip_New)}}});var se=E(Q,[["render",K],["__scopeId","data-v-759d3dda"]]);export{se as C};
