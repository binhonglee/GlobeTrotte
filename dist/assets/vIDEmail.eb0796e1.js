import{aW as l,o as u,c,aO as m,e as s,p as f,b as _,_ as g,d as p,G as a,R as t,k as n,j as h,aX as v}from"./index.80fe1401.js";class w{constructor(i){this.uuid="",this.email="",this.userid=0,i&&(this.uuid=i.uuid!==void 0&&i.uuid!==null?i.uuid:"",this.email=i.email!==void 0&&i.email!==null?i.email:"",this.userid=i.userid!==void 0&&i.userid!==null?i.userid:0)}toJsonKey(i){switch(i){case"uuid":return"uuid";case"email":return"email";case"userid":return"userid";default:return i}}}const o=e=>(f("data-v-0e0961c5"),e=e(),_(),e),C={class:"confirm_email_uuid"},E=o(()=>s("h1",null,"Email Confirmation",-1)),$={class:"emailConfirmationLoadingBox"},I=o(()=>s("p",null,"Confirming your email address...",-1));function R(e,i,r,T,D,S){const d=l("loading");return u(),c("div",C,[E,m(s("div",$,null,512),[[d,e.loading]]),I])}const y=p({data(){return{loading:!1}},async mounted(){this.$data.loading=!0;const e=await a.genCurrentUser();if(e.details.confirmed){this.$data.loading=!1,await t.genRedirectTo(n.Landing);return}const i=a.paramID();if(i===void 0){await t.genRedirectTo(n.unconfirmed_Email);return}const r=await h.genPOST("confirm/email",v.stringify(new w({uuid:i,email:e.details.email,userid:e.ID})));await a.genUpdateCurrentUser(),this.$data.loading=!1,r?(this.$notify(a.notifConfig("Email Confirmation","Your email is now confirmed!","success")),await t.genRedirectTo(n.Landing)):(this.$notify(a.notifConfig("Email Confirmation","Email confirmation failed.","error")),await t.genRedirectTo(n.unconfirmed_Email))}});var B=g(y,[["render",R],["__scopeId","data-v-0e0961c5"]]);export{B as default};
