var c=Object.defineProperty;var l=(e,i,n)=>i in e?c(e,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[i]=n;var a=(e,i,n)=>(l(e,typeof i!="symbol"?i+"":i,n),n);import{d as m,G as s,R as t,g as r,f,aS as _,o as g,c as p,e as d,_ as E}from"./index.5cdb4cc0.js";import{N as o,a as u}from"./NaiveUtils.4020aff5.js";class R{constructor(i){a(this,"uuid","");a(this,"userid",0);i&&(this.uuid=i.uuid!==void 0&&i.uuid!==null?i.uuid:"",this.userid=i.userid!==void 0&&i.userid!==null?i.userid:0)}toJsonKey(i){switch(i){case"uuid":return"uuid";case"userid":return"userid";default:return i}}}const w=m({beforeMount(){o.init()},async mounted(){const e=await s.genCurrentUser();if(e.confirmed){await t.genRedirectTo(r.Landing);return}const i=s.paramID();if(i===void 0){await t.genRedirectTo(r.unconfirmed_Email);return}const n=await f.genPOST("confirm/email",_.stringify(new R({uuid:i,userid:e.ID})));await s.genUpdateCurrentUser(),n?(o.notifyTrigger("Email Confirmation","Your email is now confirmed!",u.SUCCESS),await t.genRedirectTo(r.Landing)):(o.notifyTrigger("Email Confirmation","Email confirmation failed.",u.ERROR),await t.genRedirectTo(r.unconfirmed_Email))}}),T={class:"confirm_email_uuid"},h=d("h1",null,"Email Confirmation",-1),C=d("p",null,"Confirming your email address...",-1),y=[h,C];function v(e,i,n,S,U,N){return g(),p("div",T,y)}const D=E(w,[["render",v]]);export{D as default};
