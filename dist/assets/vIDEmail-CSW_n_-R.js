var c=Object.defineProperty;var l=(e,i,n)=>i in e?c(e,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[i]=n;var a=(e,i,n)=>l(e,typeof i!="symbol"?i+"":i,n);import{d as m,G as s,R as r,e as t,H as f,j as g,c as p,b as u,o as E,_ as R}from"./index-CVwEz7sZ.js";import{N as o,a as d}from"./NaiveUtils-CaBEIltk.js";class _{constructor(i){a(this,"uuid","");a(this,"userid",0);i&&(this.uuid=i.uuid!==void 0&&i.uuid!==null?i.uuid:"",this.userid=i.userid!==void 0&&i.userid!==null?i.userid:0)}toJsonKey(i){switch(i){case"uuid":return"uuid";case"userid":return"userid";default:return i}}}const w=m({beforeMount(){o.init()},async mounted(){const e=await s.genCurrentUser();if(e.confirmed){await r.genRedirectTo(t.Landing);return}const i=s.paramID();if(i===void 0){await r.genRedirectTo(t.unconfirmed_Email);return}const n=await f.genPOST("confirm/email",g.WingsStructUtil.stringify(new _({uuid:i,userid:e.ID})));await s.genUpdateCurrentUser(),n?(o.notifyTrigger("Email Confirmation","Your email is now confirmed!",d.SUCCESS),await r.genRedirectTo(t.Landing)):(o.notifyTrigger("Email Confirmation","Email confirmation failed.",d.ERROR),await r.genRedirectTo(t.unconfirmed_Email))}}),T={class:"confirm_email_uuid"};function C(e,i,n,y,v,U){return E(),p("div",T,i[0]||(i[0]=[u("h1",null,"Email Confirmation",-1),u("p",null,"Confirming your email address...",-1)]))}const N=R(w,[["render",C]]);export{N as default};
