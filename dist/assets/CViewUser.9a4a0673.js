import{a as v}from"./CPlaces.143d35d8.js";import{C as w}from"./CTripPreviewCard.9d3bfa92.js";import{U as C,G as k,R as T,a as $,_ as E}from"./index.9d013ab5.js";import{T as B}from"./TripUtil.cf3da4e6.js";import{r as o,o as t,d as s,i as _,B as u,g as r,f as c,w as a,h as i,e as n,F as N,v as P,q as U,s as b,j as A,K as I,x as V,D}from"./vendor.1cd2bc54.js";const L=e=>(U("data-v-2fdaa0ba"),e=e(),b(),e),R={class:"view_user"},S={class:"userInfo narrow_content"},G={key:0,class:"userName left_col"},O={key:1,class:"userBio"},j={key:3,class:"userInfoButtonGroups"},q=i("Logout"),F=i("Edit"),M={class:"viewUserTrips"},z=L(()=>_("h2",null,"Trips",-1)),K={key:0,class:"createTripAlertDiv"},H=i("Seems like you have not shared any of your own trips."),J=i("Create New Trip");function Q(e,l,p,X,Y,Z){const f=o("CExternalLink"),d=o("n-button"),h=o("n-divider"),m=o("CTripPreviewCard"),y=o("n-alert");return t(),s("div",R,[_("div",S,[e.showName?(t(),s("h2",G,u(e.user.details.name),1)):r("",!0),e.user.details.bio!==""?(t(),s("p",O,u(e.user.details.bio),1)):r("",!0),e.user.details.link!==""?(t(),c(f,{key:2,underline:"hover",url:e.user.details.link.valueOf()},{default:a(()=>[i(u(e.user.details.link),1)]),_:1},8,["url"])):r("",!0),e.self?(t(),s("div",j,[n(d,{class:"myAccountLogout left_col",type:"error",onClick:e.logout},{default:a(()=>[q]),_:1},8,["onClick"]),n(d,{class:"myAccountEdit right_col",type:"default",ref:"edit",onClick:e.toggleEdit},{default:a(()=>[F]),_:1},8,["onClick"])])):r("",!0)]),n(h,{class:"viewUserDivider"}),_("div",M,[z,(t(!0),s(N,null,P(e.trips,g=>(t(),c(m,{trip:g,wide:!0},null,8,["trip"]))),256)),e.self&&e.tripsEmpty?(t(),s("div",K,[n(y,{class:"createTripAlert",type:"default","show-icon":!1},{default:a(()=>[H,e.confirmed?(t(),c(d,{key:0,class:"createTripButton",type:"info",onClick:e.newTrip,size:"large"},{default:a(()=>[J]),_:1},8,["onClick"])):r("",!0)]),_:1})])):r("",!0)])])}const W=A({name:"CViewUser",components:{CExternalLink:v,CTripPreviewCard:w,NAlert:I,NButton:V,NDivider:D},props:{user:{type:C,required:!0},showName:{type:Boolean,default:!0},self:{type:Boolean,default:!1},confirmed:{type:Boolean,default:!1}},emits:{logout(){return!0},toggleEdit(){return!0}},data:()=>({trips:[],lastPopulated:[],tripsEmpty:!0}),async beforeMount(){await this.genPopulateTrips()},async beforeUpdate(){await this.genPopulateTrips()},methods:{compareArray(e,l){if(e.length!==l.length)return!1;for(let p in e)if(e[p]!==l[p])return!1;return!0},async genPopulateTrips(){this.compareArray(this.$data.lastPopulated,this.$props.user.trips)||(this.$data.trips=await Promise.all(this.$props.user.trips.map(async e=>await k.genTrip(e.ID.valueOf()))),B.sortTripsMostRecentlyUpdated(this.$data.trips),this.$data.tripsEmpty=this.$data.trips.length<=0,this.$data.lastPopulated=this.$props.user.trips)},logout(){this.$emit("logout")},toggleEdit(){this.$emit("toggleEdit")},async newTrip(){await T.genRedirectTo($.trip_New)}}});var oe=E(W,[["render",Q],["__scopeId","data-v-2fdaa0ba"]]);export{oe as C};
