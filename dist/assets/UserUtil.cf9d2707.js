var f=Object.defineProperty;var h=(t,e,r)=>e in t?f(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var a=(t,e,r)=>(h(t,typeof e!="symbol"?e+"":e,r),r);import{b1 as p,b2 as g}from"./index.17de6072.js";class m{static isPWA(){switch("production"){case"production":return window.matchMedia("(display-mode: standalone)").matches;case"development":return!0}return!0}}class O{constructor(e){a(this,"order");a(this,"key");a(this,"obj");this.order=e.order,this.key=e.key,this.obj=e.obj}static paramsToRecord(e,r,o){return{order:e,key:r,obj:o}}getOrder(){return this.order}getKey(){return this.key}incrementOrder(){return this.order++,this.order}getObj(){const e=g(this.obj).replaceAll("\\'","'");return this.getObjImpl(e)}}function d(t,e){if(e===null)return null;try{const r=JSON.parse(e),o=[];for(const n of r)o.push(new t(n));return o}catch{return null}}class S{constructor(){a(this,"fromStorage",!1);a(this,"completed",null);a(this,"promise",null)}}class y{getStorage(){return localStorage.getItem(this.storage)}setStorage(e){localStorage.setItem(this.storage,JSON.stringify(e))}async genObjImpl(e,r,o){const n=new e;if(m.isPWA()){const s=d(r,this.getStorage());if(s!==null){for(const l of s)if(l.getKey()===o)return n.completed=l.getObj(),n.promise=this.genFetch(o),n.fromStorage=!0,n}}return n.completed=await this.genFetch(o),n.promise=null,n}storeObj(e,r,o,n){let s;try{s=d(r,this.getStorage())}catch{s=null}let l=0;if(s!==null){const i=[];for(const[c,u]of s.entries())u.getKey()===o?i.push(c):u.getOrder()>l&&(l=u.getOrder(),i.push(c)),u.incrementOrder();for(const c of i)s.length===1&&(s=[]),s.splice(c,1)}else s=[];s.push(new r(O.paramsToRecord(l,o,p(n)))),this.setStorage(s)}}var b=(t=>(t.TRIP="trip",t.USER="user",t.USERNAME="username",t))(b||{});function A(t){return t.replaceAll('"','\\"').replaceAll("	","").replaceAll(`
`,"\\n")}function R(t,e){return t.ID.valueOf()===e.ID.valueOf()&&t.details.bio.valueOf()===e.details.bio.valueOf()&&t.details.link.valueOf()===e.details.link.valueOf()&&t.details.name.valueOf()===e.details.name.valueOf()&&t.details.username.valueOf()===e.details.username.valueOf()}export{y as C,S as F,m as P,b as a,O as b,A as p,R as s};
