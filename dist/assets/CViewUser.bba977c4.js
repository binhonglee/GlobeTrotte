import{a as w}from"./CPlaces.5326a45d.js";import{C as k}from"./CShare.64420888.js";import{C as T}from"./CTripPreviewCard.4cc00468.js";import{U as $,H as U,a as _,G as E,R as L,_ as N}from"./index.5868d95c.js";import{T as R}from"./TripUtil.cf3da4e6.js";import{r as s,o as t,d as r,i as h,C as u,g as a,f as c,w as o,h as n,e as i,F as B,y as P,t as S,v as A,j as I,M as b,z as V,G as D}from"./vendor.f83d26ee.js";const G=e=>(S("data-v-7ddf39d7"),e=e(),A(),e),O={class:"view_user"},M={class:"userInfo narrow_content"},j={key:0,class:"userName left_col"},q={key:1,class:"userBio"},z={key:3,class:"userInfoButtonGroups"},F=n("Logout"),H=n("Edit"),J={class:"viewUserTrips"},K=G(()=>h("h2",null,"Trips",-1)),Q={key:0,class:"createTripAlertDiv"},W=n("Seems like you have not shared any of your own trips."),X=n("Create New Trip");function Y(e,l,p,x,ee,te){const f=s("CExternalLink"),m=s("CShare"),d=s("n-button"),y=s("n-divider"),g=s("CTripPreviewCard"),v=s("n-alert");return t(),r("div",O,[h("div",M,[e.showName?(t(),r("h2",j,u(e.user.details.name),1)):a("",!0),e.user.details.bio!==""?(t(),r("p",q,u(e.user.details.bio),1)):a("",!0),e.user.details.link!==""?(t(),c(f,{key:2,class:"externalLink",underline:"hover",url:e.user.details.link.valueOf()},{default:o(()=>[n(u(e.user.details.link),1)]),_:1},8,["url"])):a("",!0),i(m,{shareURL:e.shareURL},null,8,["shareURL"]),e.self?(t(),r("div",z,[i(d,{class:"myAccountLogout left_col",type:"error",onClick:e.logout},{default:o(()=>[F]),_:1},8,["onClick"]),i(d,{class:"myAccountEdit right_col",type:"default",ref:"edit",onClick:e.toggleEdit},{default:o(()=>[H]),_:1},8,["onClick"])])):a("",!0)]),i(y,{class:"viewUserDivider"}),h("div",J,[K,(t(!0),r(B,null,P(e.trips,C=>(t(),c(g,{trip:C,wide:!0,"limit-height":!1},null,8,["trip"]))),256)),e.self&&e.tripsEmpty?(t(),r("div",Q,[i(v,{class:"createTripAlert",type:"default","show-icon":!1},{default:o(()=>[W,e.confirmed?(t(),c(d,{key:0,class:"createTripButton",type:"info",onClick:e.newTrip,size:"large"},{default:o(()=>[X]),_:1},8,["onClick"])):a("",!0)]),_:1})])):a("",!0)])])}const Z=I({name:"CViewUser",components:{CExternalLink:w,CShare:k,CTripPreviewCard:T,NAlert:b,NButton:V,NDivider:D},props:{user:{type:$,required:!0},showName:{type:Boolean,default:!0},self:{type:Boolean,default:!1},confirmed:{type:Boolean,default:!1}},emits:{logout(){return!0},toggleEdit(){return!0}},data:()=>({trips:[],lastPopulated:[],tripsEmpty:!0,shareURL:""}),async beforeMount(){await this.genPopulateTrips();let e=this.$props.user.details.username.valueOf();e===""&&(e=this.$props.user.ID.toString()),this.$data.shareURL=U.getAbsoluteURL(_.User,e)},async beforeUpdate(){await this.genPopulateTrips()},methods:{compareArray(e,l){if(e.length!==l.length)return!1;for(let p in e)if(e[p]!==l[p])return!1;return!0},async genPopulateTrips(){this.compareArray(this.$data.lastPopulated,this.$props.user.trips)||(this.$data.trips=await Promise.all(this.$props.user.trips.map(async e=>await E.genTrip(e.ID.valueOf()))),R.sortTripsMostRecentlyUpdated(this.$data.trips),this.$data.tripsEmpty=this.$data.trips.length<=0,this.$data.lastPopulated=this.$props.user.trips)},logout(){this.$emit("logout")},toggleEdit(){this.$emit("toggleEdit")},async newTrip(){await L.genRedirectTo(_.trip_New)}}});var le=N(Z,[["render",Y],["__scopeId","data-v-7ddf39d7"]]);export{le as C};
