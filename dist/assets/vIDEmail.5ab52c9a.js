import{d,G as n,R as a,g as t,f as l,aV as c,o as m,c as f,e as u,_}from"./index.2f18e486.js";import{N as r,a as o}from"./NaiveUtils.47f5c3ae.js";class g{constructor(i){this.uuid="",this.email="",this.userid=0,i&&(this.uuid=i.uuid!==void 0&&i.uuid!==null?i.uuid:"",this.email=i.email!==void 0&&i.email!==null?i.email:"",this.userid=i.userid!==void 0&&i.userid!==null?i.userid:0)}toJsonKey(i){switch(i){case"uuid":return"uuid";case"email":return"email";case"userid":return"userid";default:return i}}}const p=d({beforeMount(){r.init()},async mounted(){const e=await n.genCurrentUser();if(e.details.confirmed){await a.genRedirectTo(t.Landing);return}const i=n.paramID();if(i===void 0){await a.genRedirectTo(t.unconfirmed_Email);return}const s=await l.genPOST("confirm/email",c.stringify(new g({uuid:i,email:e.details.email,userid:e.ID})));await n.genUpdateCurrentUser(),s?(r.notifyTrigger("Email Confirmation","Your email is now confirmed!",o.SUCCESS),await a.genRedirectTo(t.Landing)):(r.notifyTrigger("Email Confirmation","Email confirmation failed.",o.ERROR),await a.genRedirectTo(t.unconfirmed_Email))}}),h={class:"confirm_email_uuid"},E=u("h1",null,"Email Confirmation",-1),R=u("p",null,"Confirming your email address...",-1),w=[E,R];function T(e,i,s,C,v,y){return m(),f("div",h,w)}const N=_(p,[["render",T]]);export{N as default};
