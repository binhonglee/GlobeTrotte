import{resolveComponent as o,openBlock as c,createElementBlock as l,createVNode as a,createElementVNode as d,defineComponent as m}from"vue";import{_,T as i,aA as w,G as u,a as f,ao as C,R as T,b as v}from"./index.18ba2282.js";import{C as g}from"./CEditTrip.1d9482ed.js";import{C as N}from"./CHead.51847178.js";import{N as n}from"./NaiveUtils.2ea9fd11.js";import"workbox-window";import"./DataProps.0be84455.js";import"./Input.6596a750.js";import"./E.7cace6b2.js";import"./CacheStorage.97a6bb6c.js";import"./Select.1f9bf9a6.js";const y={class:"new_trip narrow_content"},h=d("h1",{class:"title"},"New Trip",-1);function E(e,r,t,S,b,H){const s=o("CHead"),p=o("CEditTrip");return c(),l("div",y,[a(s,{title:"New Trip",description:"Create new trip"}),h,a(p,{class:"newTrip narrow_display_window",trip:e.trip,isNew:!0,onSave:e.save,onCancel:e.cancel},null,8,["trip","onSave","onCancel"])])}const R=m({components:{CEditTrip:g,CHead:N},data(){return{trip:new i({details:{days:[{day_of:1,places:[{}]}]}})}},beforeMount(){n.init()},methods:{cancel(){w.back()},async save(e){const r=await u.genCurrentUser();try{if(r.ID!==0){const t=await f.genPOST("v2/trip",C.stringify(e));await T.genRedirectTo(v.trip_View+"/"+new i(t).ID);return}}catch{}n.dialogError({title:"Fail",content:"Save was unsuccessful. Please try again later.",positiveText:"OK"})}}});var q=_(R,[["render",E]]);export{q as default};
