var u=Object.defineProperty;var c=(e,i,a)=>i in e?u(e,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[i]=a;var n=(e,i,a)=>(c(e,typeof i!="symbol"?i+"":i,a),a);import{I as m,o as f,d as _,J as g,i as o,q as p,s as v,j as h,W as w}from"./vendor.1cd2bc54.js";import{_ as C,G as t,R as s,a as r,H as E}from"./index.1a3e7aab.js";class I{constructor(i){n(this,"uuid","");n(this,"email","");n(this,"userid",0);i&&(this.uuid=i.uuid!==void 0&&i.uuid!==null?i.uuid:"",this.email=i.email!==void 0&&i.email!==null?i.email:"",this.userid=i.userid!==void 0&&i.userid!==null?i.userid:0)}toJsonKey(i){switch(i){case"uuid":return"uuid";case"email":return"email";case"userid":return"userid";default:return i}}}const d=e=>(p("data-v-0e0961c5"),e=e(),v(),e),$={class:"confirm_email_uuid"},R=d(()=>o("h1",null,"Email Confirmation",-1)),y={class:"emailConfirmationLoadingBox"},T=d(()=>o("p",null,"Confirming your email address...",-1));function D(e,i,a,S,B,U){const l=m("loading");return f(),_("div",$,[R,g(o("div",y,null,512),[[l,e.loading]]),T])}const x=h({data(){return{loading:!1}},async mounted(){this.$data.loading=!0;const e=await t.genCurrentUser();if(e.details.confirmed){this.$data.loading=!1,await s.genRedirectTo(r.Landing);return}const i=t.paramID();if(i===void 0){await s.genRedirectTo(r.unconfirmed_Email);return}const a=await E.genPOST("confirm/email",w.stringify(new I({uuid:i,email:e.details.email,userid:e.ID})));await t.genUpdateCurrentUser(),this.$data.loading=!1,a?(this.$notify(t.notifConfig("Email Confirmation","Your email is now confirmed!","success")),await s.genRedirectTo(r.Landing)):(this.$notify(t.notifConfig("Email Confirmation","Email confirmation failed.","error")),await s.genRedirectTo(r.unconfirmed_Email))}});var H=C(x,[["render",D],["__scopeId","data-v-0e0961c5"]]);export{H as default};
